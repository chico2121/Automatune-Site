/*! Automatune Copyright (c) 2015 Maximillian Laumeister, see https://github.com/MaxLaumeister/automatune for license details */
function download(a,b,c){function d(a){var b=a.split(/[:;,]/),c=b[1],d="base64"==b[2]?atob:decodeURIComponent,e=d(b.pop()),f=e.length,g=0,h=new Uint8Array(f);for(g;f>g;++g)h[g]=e.charCodeAt(g);return new m([h],{type:c})}function e(a,b){if("download"in k)return k.href=a,k.setAttribute("download",p),k.innerHTML="downloading...",j.body.appendChild(k),setTimeout(function(){k.click(),j.body.removeChild(k),b===!0&&setTimeout(function(){f.URL.revokeObjectURL(k.href)},250)},66),!0;if("undefined"!=typeof safari)return a="data:"+a.replace(/^data:([\w\/\-\+]+)/,g),window.open(a)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=a),!0;var c=j.createElement("iframe");j.body.appendChild(c),b||(a="data:"+a.replace(/^data:([\w\/\-\+]+)/,g)),c.src=a,setTimeout(function(){j.body.removeChild(c)},333)}var f=window,g="application/octet-stream",h=c||g,i=a,j=document,k=j.createElement("a"),l=function(a){return String(a)},m=f.Blob||f.MozBlob||f.WebKitBlob||l;m=m.call?m.bind(f):Blob;var n,o,p=b||"download";if("true"===String(this)&&(i=[i,h],h=i[0],i=i[1]),String(i).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))return navigator.msSaveBlob?navigator.msSaveBlob(d(i),p):e(i);if(n=i instanceof m?i:new m([i],{type:h}),navigator.msSaveBlob)return navigator.msSaveBlob(n,p);if(f.URL)e(f.URL.createObjectURL(n),!0);else{if("string"==typeof n||n.constructor===l)try{return e("data:"+h+";base64,"+f.btoa(n))}catch(q){return e("data:"+h+","+encodeURIComponent(n))}o=new FileReader,o.onload=function(a){e(this.result)},o.readAsDataURL(n)}return!0}function ohSnap(a,b,c){var d="3000",e=$("#ohsnap"),f="";c&&(f="<span class='"+c+"'></span> ");var g=$('<div class="alert alert-'+b+'">'+f+a+"</div>");e.append(g),g.on("click",function(){ohSnapX($(this))}),setTimeout(function(){ohSnapX(e.children(".alert").first())},d)}function ohSnapX(a){"undefined"!=typeof a?a.fadeOut(300,function(){$(this).remove()}):$(".alert").remove()}function assert(a){"use strict";function b(){try{throw Error("")}catch(a){return a}}if(!a||1!==arguments.length){var c=b(),d=c.stack.split("\n")[4],e=d.indexOf("at "),f=d.slice(e+2,d.length).trim();throw'"Assert Failed" at '+f}}function getUrlParameter(a,b){"use strict";b||(b=location.href),a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+a+"=([^&#]*)",d=new RegExp(c),e=d.exec(b);return null===e?null:e[1]}function Automatune(a,b,c,d){"use strict";assert(4===arguments.length),this.domElement,this.playbackElement,this.playbackButtons,this.grid,this.updateTargets,this.updateInterval,this.tickMs,this.playing=!1,this.updateTargets=[],this.tickMs=Automatune.TICK_NORMAL,this.domElement=a,this.playbackElement=b,this.grid=new Automatune.Grid(this,d),new Automatune.Menu(this,c),this.playbackButtons={};for(var e=0;e<b.childNodes.length;e++){var f=b.childNodes[e];f.classList&&(f.classList.contains("playback-play")?this.playbackButtons.playButton=f:f.classList.contains("playback-pause")?this.playbackButtons.pauseButton=f:f.classList.contains("playback-reset")&&(this.playbackButtons.resetButton=f))}var g=this;$("#share-this-tune").click(function(){g.getSharingURL()}),assert(this.playbackButtons.playButton&&this.playbackButtons.pauseButton&&this.playbackButtons.resetButton),this.playbackButtons.playButton.onclick=this.play.bind(this),this.playbackButtons.pauseButton.onclick=this.pause.bind(this),this.playbackButtons.resetButton.onclick=this.reset.bind(this);var h,i;"undefined"!=typeof document.hidden?(h="hidden",i="visibilitychange"):"undefined"!=typeof document.mozHidden?(h="mozHidden",i="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(h="msHidden",i="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(h="webkitHidden",i="webkitvisibilitychange"),document.addEventListener(i,function(){document[h]?(this.pause(),Howler.mute()):Howler.unmute()}.bind(this),!1)}!function(a,b){"undefined"!=typeof module&&module.exports?module.exports.browser=b():"function"==typeof define&&define.amd?define(b):this[a]=b()}("bowser",function(){function a(a){function c(b){var c=a.match(b);return c&&c.length>1&&c[1]||""}var d,e=c(/(ipod|iphone|ipad)/i).toLowerCase(),f=/like android/i.test(a),g=!f&&/android/i.test(a),h=c(/version\/(\d+(\.\d+)?)/i),i=/tablet/i.test(a),j=!i&&/[^-]mobi/i.test(a);/opera|opr/i.test(a)?d={name:"Opera",opera:b,version:h||c(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(a)?d={name:"Windows Phone",windowsphone:b,msie:b,version:c(/iemobile\/(\d+(\.\d+)?)/i)}:/msie|trident/i.test(a)?d={name:"Internet Explorer",msie:b,version:c(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(a)?d={name:"Chrome",chrome:b,version:c(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:e?(d={name:"iphone"==e?"iPhone":"ipad"==e?"iPad":"iPod"},h&&(d.version=h)):/sailfish/i.test(a)?d={name:"Sailfish",sailfish:b,version:c(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(a)?d={name:"SeaMonkey",seamonkey:b,version:c(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(a)?(d={name:"Firefox",firefox:b,version:c(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(a)&&(d.firefoxos=b)):/silk/i.test(a)?d={name:"Amazon Silk",silk:b,version:c(/silk\/(\d+(\.\d+)?)/i)}:g?d={name:"Android",version:h}:/phantom/i.test(a)?d={name:"PhantomJS",phantom:b,version:c(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(a)||/rim\stablet/i.test(a)?d={name:"BlackBerry",blackberry:b,version:h||c(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(a)?(d={name:"WebOS",webos:b,version:h||c(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(a)&&(d.touchpad=b)):d=/bada/i.test(a)?{name:"Bada",bada:b,version:c(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(a)?{name:"Tizen",tizen:b,version:c(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||h}:/safari/i.test(a)?{name:"Safari",safari:b,version:h}:{},/(apple)?webkit/i.test(a)?(d.name=d.name||"Webkit",d.webkit=b,!d.version&&h&&(d.version=h)):!d.opera&&/gecko\//i.test(a)&&(d.name=d.name||"Gecko",d.gecko=b,d.version=d.version||c(/gecko\/(\d+(\.\d+)?)/i)),g||d.silk?d.android=b:e&&(d[e]=b,d.ios=b);var k="";e?(k=c(/os (\d+([_\s]\d+)*) like mac os x/i),k=k.replace(/[_\s]/g,".")):g?k=c(/android[ \/-](\d+(\.\d+)*)/i):d.windowsphone?k=c(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):d.webos?k=c(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):d.blackberry?k=c(/rim\stablet\sos\s(\d+(\.\d+)*)/i):d.bada?k=c(/bada\/(\d+(\.\d+)*)/i):d.tizen&&(k=c(/tizen[\/\s](\d+(\.\d+)*)/i)),k&&(d.osversion=k);var l=k.split(".")[0];return i||"ipad"==e||g&&(3==l||4==l&&!j)||d.silk?d.tablet=b:(j||"iphone"==e||"ipod"==e||g||d.blackberry||d.webos||d.bada)&&(d.mobile=b),d.msie&&d.version>=10||d.chrome&&d.version>=20||d.firefox&&d.version>=20||d.safari&&d.version>=6||d.opera&&d.version>=10||d.ios&&d.osversion&&d.osversion.split(".")[0]>=6||d.blackberry&&d.version>=10.1?d.a=b:d.msie&&d.version<10||d.chrome&&d.version<20||d.firefox&&d.version<20||d.safari&&d.version<6||d.opera&&d.version<10||d.ios&&d.osversion&&d.osversion.split(".")[0]<6?d.c=b:d.x=b,d}var b=!0,c=a("undefined"!=typeof navigator?navigator.userAgent:"");return c._detect=a,c}),function(){var a={},b=null,c=!0,d=!1;try{"undefined"!=typeof AudioContext?b=new AudioContext:"undefined"!=typeof webkitAudioContext?b=new webkitAudioContext:c=!1}catch(e){c=!1}if(!c)if("undefined"!=typeof Audio)try{new Audio}catch(e){d=!0}else d=!0;if(c){var f="undefined"==typeof b.createGain?b.createGainNode():b.createGain();f.gain.value=1,f.connect(b.destination)}var g=function(a){this._volume=1,this._muted=!1,this.usingWebAudio=c,this.ctx=b,this.noAudio=d,this._howls=[],this._codecs=a,this.iOSAutoEnable=!0};g.prototype={volume:function(a){var b=this;if(a=parseFloat(a),a>=0&&1>=a){b._volume=a,c&&(f.gain.value=a);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].volume=b._howls[d]._volume*b._volume;return b}return c?f.gain.value:b._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(a){var b=this;b._muted=a,c&&(f.gain.value=a?0:b._volume);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].muted=a},codecs:function(a){return this._codecs[a]},_enableiOSAudio:function(){var a=this;if(!b||!a._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){a._iOSEnabled=!1;var c=function(){var d=b.createBuffer(1,1,22050),e=b.createBufferSource();e.buffer=d,e.connect(b.destination),"undefined"==typeof e.start?e.noteOn(0):e.start(0),setTimeout(function(){(e.playbackState===e.PLAYING_STATE||e.playbackState===e.FINISHED_STATE)&&(a._iOSEnabled=!0,a.iOSAutoEnable=!1,window.removeEventListener("touchstart",c,!1))},0)};return window.addEventListener("touchstart",c,!1),a}}};var h=null,i={};d||(h=new Audio,i={mp3:!!h.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!h.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var j=new g(i),k=function(a){var d=this;d._autoplay=a.autoplay||!1,d._buffer=a.buffer||!1,d._duration=a.duration||0,d._format=a.format||null,d._loop=a.loop||!1,d._loaded=!1,d._sprite=a.sprite||{},d._src=a.src||"",d._pos3d=a.pos3d||[0,0,-.5],d._volume=void 0!==a.volume?a.volume:1,d._urls=a.urls||[],d._rate=a.rate||1,d._model=a.model||null,d._onload=[a.onload||function(){}],d._onloaderror=[a.onloaderror||function(){}],d._onend=[a.onend||function(){}],d._onpause=[a.onpause||function(){}],d._onplay=[a.onplay||function(){}],d._onendTimer=[],d._webAudio=c&&!d._buffer,d._audioNode=[],d._webAudio&&d._setupAudioNode(),"undefined"!=typeof b&&b&&j.iOSAutoEnable&&j._enableiOSAudio(),j._howls.push(d),d.load()};if(k.prototype={load:function(){var a=this,b=null;if(d)return void a.on("loaderror");for(var c=0;c<a._urls.length;c++){var e,f;if(a._format)e=a._format;else{if(f=a._urls[c],e=/^data:audio\/([^;,]+);/i.exec(f),e||(e=/\.([^.]+)$/.exec(f.split("?",1)[0])),!e)return void a.on("loaderror");e=e[1].toLowerCase()}if(i[e]){b=a._urls[c];break}}if(!b)return void a.on("loaderror");if(a._src=b,a._webAudio)l(a,b);else{var h=new Audio;h.addEventListener("error",function(){h.error&&4===h.error.code&&(g.noAudio=!0),a.on("loaderror",{type:h.error?h.error.code:0})},!1),a._audioNode.push(h),h.src=b,h._pos=0,h.preload="auto",h.volume=j._muted?0:a._volume*j.volume();var k=function(){a._duration=Math.ceil(10*h.duration)/10,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play(),h.removeEventListener("canplaythrough",k,!1)};h.addEventListener("canplaythrough",k,!1),h.load()}return a},urls:function(a){var b=this;return a?(b.stop(),b._urls="string"==typeof a?[a]:a,b._loaded=!1,b.load(),b):b._urls},play:function(a,c){var d=this;return"function"==typeof a&&(c=a),a&&"function"!=typeof a||(a="_default"),d._loaded?d._sprite[a]?(d._inactiveNode(function(e){e._sprite=a;var f=e._pos>0?e._pos:d._sprite[a][0]/1e3,g=0;d._webAudio?(g=d._sprite[a][1]/1e3-e._pos,e._pos>0&&(f=d._sprite[a][0]/1e3+f)):g=d._sprite[a][1]/1e3-(f-d._sprite[a][0]/1e3);var h,i=!(!d._loop&&!d._sprite[a][2]),k="string"==typeof c?c:Math.round(Date.now()*Math.random())+"";if(function(){var b={id:k,sprite:a,loop:i};h=setTimeout(function(){!d._webAudio&&i&&d.stop(b.id).play(a,b.id),d._webAudio&&!i&&(d._nodeById(b.id).paused=!0,d._nodeById(b.id)._pos=0,d._clearEndTimer(b.id)),d._webAudio||i||d.stop(b.id),d.on("end",k)},1e3*g),d._onendTimer.push({timer:h,id:b.id})}(),d._webAudio){var l=d._sprite[a][0]/1e3,m=d._sprite[a][1]/1e3;e.id=k,e.paused=!1,o(d,[i,l,m],k),d._playStart=b.currentTime,e.gain.value=d._volume,"undefined"==typeof e.bufferSource.start?e.bufferSource.noteGrainOn(0,f,g):e.bufferSource.start(0,f,g)}else{if(4!==e.readyState&&(e.readyState||!navigator.isCocoonJS))return d._clearEndTimer(k),function(){var b=d,f=a,g=c,h=e,i=function(){b.play(f,g),h.removeEventListener("canplaythrough",i,!1)};h.addEventListener("canplaythrough",i,!1)}(),d;e.readyState=4,e.id=k,e.currentTime=f,e.muted=j._muted||e.muted,e.volume=d._volume*j.volume(),setTimeout(function(){e.play()},0)}return d.on("play"),"function"==typeof c&&c(k),d}),d):("function"==typeof c&&c(),d):(d.on("load",function(){d.play(a,c)}),d)},pause:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.pause(a)}),b;b._clearEndTimer(a);var c=a?b._nodeById(a):b._activeNode();if(c)if(c._pos=b.pos(null,a),b._webAudio){if(!c.bufferSource||c.paused)return b;c.paused=!0,"undefined"==typeof c.bufferSource.stop?c.bufferSource.noteOff(0):c.bufferSource.stop(0)}else c.pause();return b.on("pause"),b},stop:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.stop(a)}),b;b._clearEndTimer(a);var c=a?b._nodeById(a):b._activeNode();if(c)if(c._pos=0,b._webAudio){if(!c.bufferSource||c.paused)return b;c.paused=!0,"undefined"==typeof c.bufferSource.stop?c.bufferSource.noteOff(0):c.bufferSource.stop(0)}else isNaN(c.duration)||(c.pause(),c.currentTime=0);return b},mute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=0:c.muted=!0),b},unmute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=b._volume:c.muted=!1),b},volume:function(a,b){var c=this;if(a=parseFloat(a),a>=0&&1>=a){if(c._volume=a,!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;var d=b?c._nodeById(b):c._activeNode();return d&&(c._webAudio?d.gain.value=a:d.volume=a*j.volume()),c}return c._volume},loop:function(a){var b=this;return"boolean"==typeof a?(b._loop=a,b):b._loop},sprite:function(a){var b=this;return"object"==typeof a?(b._sprite=a,b):b._sprite},pos:function(a,c){var d=this;if(!d._loaded)return d.on("load",function(){d.pos(a)}),"number"==typeof a?d:d._pos||0;a=parseFloat(a);var e=c?d._nodeById(c):d._activeNode();if(e)return a>=0?(d.pause(c),e._pos=a,d.play(e._sprite,c),d):d._webAudio?e._pos+(b.currentTime-d._playStart):e.currentTime;if(a>=0)return d;for(var f=0;f<d._audioNode.length;f++)if(d._audioNode[f].paused&&4===d._audioNode[f].readyState)return d._webAudio?d._audioNode[f]._pos:d._audioNode[f].currentTime},pos3d:function(a,b,c,d){var e=this;if(b="undefined"!=typeof b&&b?b:0,c="undefined"!=typeof c&&c?c:-.5,!e._loaded)return e.on("play",function(){e.pos3d(a,b,c,d)}),e;if(!(a>=0||0>a))return e._pos3d;if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,b,c],f.panner.setPosition(a,b,c),f.panner.panningModel=e._model||"HRTF")}return e},fade:function(a,b,c,d,e){var f=this,g=Math.abs(a-b),h=a>b?"down":"up",i=g/.01,j=c/i;if(!f._loaded)return f.on("load",function(){f.fade(a,b,c,d,e)}),f;f.volume(a,e);for(var k=1;i>=k;k++)!function(){var a=f._volume+("up"===h?.01:-.01)*k,c=Math.round(1e3*a)/1e3,g=b;setTimeout(function(){f.volume(c,e),c===g&&d&&d()},j*k)}()},fadeIn:function(a,b,c){return this.volume(0).play().fade(0,a,b,c)},fadeOut:function(a,b,c,d){var e=this;return e.fade(e._volume,a,b,function(){c&&c(),e.pause(d),e.on("end")},d)},_nodeById:function(a){for(var b=this,c=b._audioNode[0],d=0;d<b._audioNode.length;d++)if(b._audioNode[d].id===a){c=b._audioNode[d];break}return c},_activeNode:function(){for(var a=this,b=null,c=0;c<a._audioNode.length;c++)if(!a._audioNode[c].paused){b=a._audioNode[c];break}return a._drainPool(),b},_inactiveNode:function(a){for(var b=this,c=null,d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState){a(b._audioNode[d]),c=!0;break}if(b._drainPool(),!c){var e;if(b._webAudio)e=b._setupAudioNode(),a(e);else{b.load(),e=b._audioNode[b._audioNode.length-1];var f=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",g=function(){e.removeEventListener(f,g,!1),a(e)};e.addEventListener(f,g,!1)}}},_drainPool:function(){var a,b=this,c=0;for(a=0;a<b._audioNode.length;a++)b._audioNode[a].paused&&c++;for(a=b._audioNode.length-1;a>=0&&!(5>=c);a--)b._audioNode[a].paused&&(b._webAudio&&b._audioNode[a].disconnect(0),c--,b._audioNode.splice(a,1))},_clearEndTimer:function(a){for(var b=this,c=0,d=0;d<b._onendTimer.length;d++)if(b._onendTimer[d].id===a){c=d;break}var e=b._onendTimer[c];e&&(clearTimeout(e.timer),b._onendTimer.splice(c,1))},_setupAudioNode:function(){var a=this,c=a._audioNode,d=a._audioNode.length;return c[d]="undefined"==typeof b.createGain?b.createGainNode():b.createGain(),c[d].gain.value=a._volume,c[d].paused=!0,c[d]._pos=0,c[d].readyState=4,c[d].connect(f),c[d].panner=b.createPanner(),c[d].panner.panningModel=a._model||"equalpower",c[d].panner.setPosition(a._pos3d[0],a._pos3d[1],a._pos3d[2]),c[d].panner.connect(c[d]),c[d]},on:function(a,b){var c=this,d=c["_on"+a];if("function"==typeof b)d.push(b);else for(var e=0;e<d.length;e++)b?d[e].call(c,b):d[e].call(c);return c},off:function(a,b){var c=this,d=c["_on"+a],e=b?b.toString():null;if(e){for(var f=0;f<d.length;f++)if(e===d[f].toString()){d.splice(f,1);break}}else c["_on"+a]=[];return c},unload:function(){for(var b=this,c=b._audioNode,d=0;d<b._audioNode.length;d++)c[d].paused||(b.stop(c[d].id),b.on("end",c[d].id)),b._webAudio?c[d].disconnect(0):c[d].src="";for(d=0;d<b._onendTimer.length;d++)clearTimeout(b._onendTimer[d].timer);var e=j._howls.indexOf(b);null!==e&&e>=0&&j._howls.splice(e,1),delete a[b._src],b=null}},c)var l=function(b,c){if(c in a)return b._duration=a[c].duration,void n(b);if(/^data:[^;]+;base64,/.test(c)){for(var d=atob(c.split(",")[1]),e=new Uint8Array(d.length),f=0;f<d.length;++f)e[f]=d.charCodeAt(f);m(e.buffer,b,c)}else{var g=new XMLHttpRequest;g.open("GET",c,!0),g.responseType="arraybuffer",g.onload=function(){m(g.response,b,c)},g.onerror=function(){b._webAudio&&(b._buffer=!0,b._webAudio=!1,b._audioNode=[],delete b._gainNode,delete a[c],b.load())};try{g.send()}catch(h){g.onerror()}}},m=function(c,d,e){b.decodeAudioData(c,function(b){b&&(a[e]=b,n(d,b))},function(a){d.on("loaderror")})},n=function(a,b){a._duration=b?b.duration:a._duration,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play()},o=function(c,d,e){var f=c._nodeById(e);f.bufferSource=b.createBufferSource(),f.bufferSource.buffer=a[c._src],f.bufferSource.connect(f.panner),f.bufferSource.loop=d[0],d[0]&&(f.bufferSource.loopStart=d[1],f.bufferSource.loopEnd=d[1]+d[2]),f.bufferSource.playbackRate.value=c._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:j,Howl:k}}),"undefined"!=typeof exports&&(exports.Howler=j,exports.Howl=k),"undefined"!=typeof window&&(window.Howler=j,window.Howl=k)}(),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";var b,c,d="onselectstart"in document.createElement("div");a.widget("moogle.contextmenu",{version:"@VERSION",options:{autoTrigger:!0,delegate:null,hide:{effect:"fadeOut",duration:"fast"},ignoreParentSelect:!0,menu:null,position:null,preventContextMenuForPopup:!1,preventSelect:!1,show:{effect:"slideDown",duration:"fast"},taphold:!1,uiMenuOptions:{},beforeOpen:a.noop,blur:a.noop,close:a.noop,create:a.noop,createMenu:a.noop,focus:a.noop,open:a.noop,select:a.noop},_create:function(){var b,c,e,f=this.options;if(this.$headStyle=null,this.$menu=null,this.menuIsTemp=!1,this.currentTarget=null,f.preventSelect){e=(a(this.element).is(document)?a("body"):this.element).uniqueId().attr("id"),b="#"+e+" "+f.delegate+" { -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }",this.$headStyle=a("<style class='moogle-contextmenu-style' />").prop("type","text/css").appendTo("head");try{this.$headStyle.html(b)}catch(g){this.$headStyle[0].styleSheet.cssText=b}d&&this.element.delegate(f.delegate,"selectstart"+this.eventNamespace,function(a){a.preventDefault()})}this._createUiMenu(f.menu),c="contextmenu"+this.eventNamespace,f.taphold&&(c+=" taphold"+this.eventNamespace),this.element.delegate(f.delegate,c,a.proxy(this._openMenu,this))},_destroy:function(){this.element.undelegate(this.eventNamespace),this._createUiMenu(null),this.$headStyle&&(this.$headStyle.remove(),this.$headStyle=null)},_createUiMenu:function(b){var c;this.isOpen()&&(c=this.currentTarget,this._closeMenu(!0),this.currentTarget=c),this.menuIsTemp?this.$menu.remove():this.$menu&&this.$menu.menu("destroy").hide(),this.$menu=null,this.menuIsTemp=!1,b&&(a.isArray(b)?(this.$menu=a.moogle.contextmenu.createMenuMarkup(b),this.menuIsTemp=!0):"string"==typeof b?this.$menu=a(b):this.$menu=b,this.$menu.hide().menu(a.extend(!0,{},this.options.uiMenuOptions,{blur:a.proxy(this.options.blur,this),create:a.proxy(this.options.createMenu,this),focus:a.proxy(this.options.focus,this),select:a.proxy(function(b,c){var d,e=a.moogle.contextmenu.isMenu(c.item),f=c.item.data("actionHandler");c.cmd=c.item.attr("data-command"),c.target=a(this.currentTarget),e&&this.options.ignoreParentSelect||(d=this._trigger.call(this,"select",b,c),f&&(d=f.call(this,b,c)),d!==!1&&this._closeMenu.call(this),b.preventDefault())},this)})))},_openMenu:function(b){var c=this.options,d=c.position,e=this,f=!!b.isTrigger,g={menu:this.$menu,target:a(b.target),extraData:b.extraData,originalEvent:b};if(c.autoTrigger||f){if(this.currentTarget=b.target,b.preventDefault(),this._trigger("beforeOpen",b,g)===!1)return this.currentTarget=null,!1;g.menu=this.$menu,a(document).bind("keydown"+this.eventNamespace,function(b){b.which===a.ui.keyCode.ESCAPE&&e._closeMenu()}).bind("mousedown"+this.eventNamespace+" touchstart"+this.eventNamespace,function(b){a(b.target).closest(".ui-menu-item").length||e._closeMenu()}),a.isFunction(d)&&(d=d(b,g)),d=a.extend({my:"left top",at:"left bottom",of:void 0===b.pageX?b.target:b,collision:"fit"},d),this.$menu.show().css({position:"absolute",left:0,top:0}).position(d).hide(),c.preventContextMenuForPopup&&this.$menu.bind("contextmenu"+this.eventNamespace,function(a){a.preventDefault()}),this._show(this.$menu,this.options.show,function(){e._trigger.call(e,"open",b,g)})}},_closeMenu:function(b){var c=this,d=b?!1:this.options.hide;a(document).unbind("mousedown"+this.eventNamespace).unbind("touchstart"+this.eventNamespace).unbind("keydown"+this.eventNamespace),this.$menu.unbind("contextmenu"+this.eventNamespace),c.currentTarget=null,this._hide(this.$menu,d,function(){c._trigger("close")})},_setOption:function(b,c){switch(b){case"menu":this.replaceMenu(c)}a.Widget.prototype._setOption.apply(this,arguments)},_getMenuEntry:function(a){return this.$menu.find("li[data-command="+a+"]")},close:function(){this.isOpen()&&this._closeMenu()},enableEntry:function(a,b){this._getMenuEntry(a).toggleClass("ui-state-disabled",b===!1)},getMenu:function(){return this.$menu},isOpen:function(){return!!this.$menu&&!!this.currentTarget},open:function(a,b){b=b||{};var c=jQuery.Event("contextmenu",{target:a.get(0),extraData:b});return this.element.trigger(c)},replaceMenu:function(a){this._createUiMenu(a)},setEntry:function(b,c){var d=this._getMenuEntry(b);"string"==typeof c?a.moogle.contextmenu.updateTitle(d,c):(d.empty(),c.cmd=c.cmd||b,a.moogle.contextmenu.createEntryMarkup(c,d))},showEntry:function(a,b){this._getMenuEntry(a).toggle(b!==!1)}}),a.extend(a.moogle.contextmenu,{createMenuMarkup:function(b,c){var d,e,f,g;for(null==c&&(c=a("<ul class='ui-helper-hidden' />").appendTo("body")),d=0;d<b.length;d++)e=b[d],g=a("<li/>").appendTo(c),a.moogle.contextmenu.createEntryMarkup(e,g),a.isArray(e.children)&&(f=a("<ul/>").appendTo(g),a.moogle.contextmenu.createMenuMarkup(e.children,f));return c},replaceFirstTextNodeChild:function(a,b){a.contents().filter(function(){return 3===this.nodeType}).first().replaceWith(b)}}),b=a.ui.menu.version.match(/^(\d)\.(\d+)/),c={major:parseInt(b[1],10),minor:parseInt(b[2],10)},c.major<2&&c.minor<11?a.extend(a.moogle.contextmenu,{createEntryMarkup:function(b,c){var d=null;/[^\-\u2014\u2013\s]/.test(b.title)?(c.attr("data-command",b.cmd),d=a("<a/>",{html:""+b.title,href:"#"}).appendTo(c),a.isFunction(b.action)&&c.data("actionHandler",b.action),b.uiIcon&&d.append(a("<span class='ui-icon' />").addClass(b.uiIcon)),b.disabled&&c.addClass("ui-state-disabled"),a.isPlainObject(b.data)&&d.data(b.data)):c.text(b.title)},isMenu:function(a){return a.has(">a[aria-haspopup='true']").length>0},updateTitle:function(b,c){a.moogle.contextmenu.replaceFirstTextNodeChild(a("a",b),c)}}):a.extend(a.moogle.contextmenu,{createEntryMarkup:function(b,c){/[^\-\u2014\u2013\s]/.test(b.title)?(c.attr("data-command",b.cmd).html(""+b.title),a.isFunction(b.action)&&c.data("actionHandler",b.action),b.uiIcon&&c.append(a("<span class='ui-icon' />").addClass(b.uiIcon)),b.disabled&&c.addClass("ui-state-disabled"),a.isPlainObject(b.data)&&c.data(b.data)):c.text(b.title)},isMenu:function(a){return a.is("[aria-haspopup='true']")},updateTitle:function(b,c){a.moogle.contextmenu.replaceFirstTextNodeChild(b,c)}})}),function(a){var b={init:function(b){return b=a.extend({},a.fn.message.defaults,b),this.each(function(){var c=a(this),d=c.data("message");if(!d){var e=b.message;(null==e||""==e)&&(e=c.html(),b.message=e);var f="info"==b.type?"ui-state-highlight":"ui-state-error",g="info"==b.type?"ui-icon-info":"ui-icon-alert",h="<div class='ui-widget message-container'>";h+="<div class='"+f+" ui-corner-all' >",h+="<p><span class='ui-icon "+g+"' style='float:left;'></span>",h+="<span class='message-text'>"+e+"</span>",b.dismiss&&(h+="<span class='message-dismiss'>Click to dismiss.</span>"),h+="</p></div></div>",b.dismiss&&c.click(function(){a(this).hide("normal")}),c.html(h).show(),c.data("message",b)}})},options:function(b){return this.each(function(){var c=a(this),d=c.data("message")||{};b=a.extend({},d,b),c.message("destroy").message("init",b)})},show:function(){a(this).show()},hide:function(){a(this).hide()},destroy:function(){return this.each(function(){var b=a(this),c=b.data("message");a(".message-container",b).remove(),b.html(c.message).css("display:none"),b.removeData("message")})}};a.fn.message=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.message"):b.init.apply(this,arguments)},a.fn.message.defaults={message:"",type:"info",dismiss:!0}}(jQuery);var e=function(){"use strict";function a(a,b){postMessage({action:Jb,cbn:b,result:a})}function b(a){var b=[];return b[a-1]=void 0,b}function c(a,b){return g(a[0]+b[0],a[1]+b[1])}function d(a,b){return k(~~Math.max(Math.min(a[1]/Lb,2147483647),-2147483648)&~~Math.max(Math.min(b[1]/Lb,2147483647),-2147483648),j(a)&j(b))}function f(a,b){var c,d;return a[0]==b[0]&&a[1]==b[1]?0:(c=0>a[1],d=0>b[1],c&&!d?-1:!c&&d?1:p(a,b)[1]<0?-1:1)}function g(a,b){var c,d;for(b%=0x10000000000000000,a%=0x10000000000000000,c=b%Lb,d=Math.floor(a/Lb)*Lb,b=b-c+d,a=a-d+c;0>a;)a+=Lb,b-=Lb;for(;a>4294967295;)a-=Lb,b+=Lb;for(b%=0x10000000000000000;b>0x7fffffff00000000;)b-=0x10000000000000000;for(;-0x8000000000000000>b;)b+=0x10000000000000000;return[a,b]}function h(a,b){return a[0]==b[0]&&a[1]==b[1]}function i(a){return a>=0?[a,0]:[a+Lb,-Lb]}function j(a){return a[0]>=2147483648?~~Math.max(Math.min(a[0]-Lb,2147483647),-2147483648):~~Math.max(Math.min(a[0],2147483647),-2147483648)}function k(a,b){var c,d;return c=a*Lb,d=b,0>b&&(d+=Lb),[d,c]}function l(a){return 30>=a?1<<a:l(30)*l(a-30)}function m(a,b){var c,d,e,f;if(b&=63,h(a,Nb))return b?Ob:a;if(0>a[1])throw Error("Neg");return f=l(b),d=a[1]*f%0x10000000000000000,e=a[0]*f,c=e-e%Lb,d+=c,e-=c,d>=0x8000000000000000&&(d-=0x10000000000000000),[e,d]}function n(a,b){var c;return b&=63,c=l(b),g(Math.floor(a[0]/c),a[1]/c)}function o(a,b){var d;return b&=63,d=n(a,b),0>a[1]&&(d=c(d,m([2,0],63-b))),d}function p(a,b){return g(a[0]-b[0],a[1]-b[1])}function q(a,b){return a.Mc=b,a.Lc=0,a.Vb=b.length,a}function r(a){return a.Lc>=a.Vb?-1:255&a.Mc[a.Lc++]}function s(a,b,c,d){return a.Lc>=a.Vb?-1:(d=Math.min(d,a.Vb-a.Lc),y(a.Mc,a.Lc,b,c,d),a.Lc+=d,d)}function t(a){return a.Mc=b(32),a.Vb=0,a}function u(a){var b=a.Mc;return b.length=a.Vb,b}function v(a,b){a.Mc[a.Vb++]=b<<24>>24}function w(a,b,c,d){y(b,c,a.Mc,a.Vb,d),a.Vb+=d}function x(a,b,c,d,e){var f;for(f=b;c>f;++f)d[e++]=a.charCodeAt(f)}function y(a,b,c,d,e){for(var f=0;e>f;++f)c[d+f]=a[b+f]}function z(a,b){Ma(b,1<<a.s),b.n=a.f,Na(b,a.m),b.eb=0,b.fb=3,b.Y=2,b.y=3}function A(a,b,c,d,e){var g,h;if(f(d,Mb)<0)throw Error("invalid length "+d);for(a.Nb=d,g=za({}),z(e,g),g.Gc=1,Oa(g,c),h=0;64>h;h+=8)v(c,255&j(n(d,h)));a.ac=(g.S=0,g.kc=b,g.lc=0,ya(g),g.d.zb=c,Ha(g),Ba(g),Aa(g),g._.pb=g.n+1-2,Za(g._,1<<g.Y),g.i.pb=g.n+1-2,Za(g.i,1<<g.Y),void(g.g=Ob),_({},g))}function B(a,b,c){return a.rc=t({}),A(a,q({},b),a.rc,i(b.length),c),a}function C(a,b,c){var d,e,f,g,h="",j=[];for(e=0;5>e;++e){if(f=r(b),-1==f)throw Error("truncated input");j[e]=f<<24>>24}if(d=ga({}),!ia(d,j))throw Error("corrupted input");for(e=0;64>e;e+=8){if(f=r(b),-1==f)throw Error("truncated input");f=f.toString(16),1==f.length&&(f="0"+f),h=f+""+h}/^0+$|^f+$/i.test(h)?a.Nb=Mb:(g=parseInt(h,16),a.Nb=g>4294967295?Mb:i(g)),a.ac=ea(d,b,c,a.Nb)}function D(a,b){return a.rc=t({}),C(a,q({},b),a.rc),a}function E(a,c,d,e){var f;a.Bc=c,a._b=d,f=c+d+e,(null==a.c||a.Jb!=f)&&(a.c=null,a.Jb=f,a.c=b(a.Jb)),a.H=a.Jb-d}function F(a,b){return a.c[a.f+a.o+b]}function G(a,b,c,d){var e,f;for(a.X&&a.o+b+d>a.h&&(d=a.h-(a.o+b)),++c,f=a.f+a.o+b,e=0;d>e&&a.c[f+e]==a.c[f+e-c];++e);return e}function H(a){return a.h-a.o}function I(a){var b,c,d;for(d=a.f+a.o-a.Bc,d>0&&--d,c=a.f+a.h-d,b=0;c>b;++b)a.c[b]=a.c[d+b];a.f-=d}function J(a){var b;++a.o,a.o>a.yb&&(b=a.f+a.o,b>a.H&&I(a),K(a))}function K(a){var b,c,d;if(!a.X)for(;;){if(d=-a.f+a.Jb-a.h,!d)return;if(b=s(a.bc,a.c,a.f+a.h,d),-1==b)return a.yb=a.h,c=a.f+a.yb,c>a.H&&(a.yb=a.H-a.f),void(a.X=1);a.h+=b,a.h>=a.o+a._b&&(a.yb=a.h-a._b)}}function L(a,b){a.f+=b,a.yb-=b,a.o-=b,a.h-=b}function M(a,c,d,e,f){var g,h,i;1073741567>c&&(a.Ec=16+(e>>1),i=~~((c+d+e+f)/2)+256,E(a,c+d,e+f,i),a.ub=e,g=c+1,a.p!=g&&(a.M=b(2*(a.p=g))),h=65536,a.rb&&(h=c-1,h|=h>>1,h|=h>>2,h|=h>>4,h|=h>>8,h>>=1,h|=65535,h>16777216&&(h>>=1),a.Fc=h,++h,h+=a.N),h!=a.sc&&(a.qb=b(a.sc=h)))}function N(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(a.h>=a.o+a.ub)p=a.ub;else if(p=a.h-a.o,a.xb>p)return P(a),0;for(s=0,q=a.o>a.p?a.o-a.p:0,d=a.f+a.o,r=1,j=0,k=0,a.rb?(w=Qb[255&a.c[d]]^255&a.c[d+1],j=1023&w,w^=(255&a.c[d+2])<<8,k=65535&w,l=(w^Qb[255&a.c[d+3]]<<5)&a.Fc):l=255&a.c[d]^(255&a.c[d+1])<<8,e=a.qb[a.N+l]||0,a.rb&&(f=a.qb[j]||0,g=a.qb[1024+k]||0,a.qb[j]=a.o,a.qb[1024+k]=a.o,f>q&&a.c[a.f+f]==a.c[d]&&(b[s++]=r=2,b[s++]=a.o-f-1),g>q&&a.c[a.f+g]==a.c[d]&&(g==f&&(s-=2),b[s++]=r=3,b[s++]=a.o-g-1,f=g),0!=s&&f==e&&(s-=2,r=1)),a.qb[a.N+l]=a.o,u=(a.k<<1)+1,v=a.k<<1,n=o=a.w,0!=a.w&&e>q&&a.c[a.f+e+a.w]!=a.c[d+a.w]&&(b[s++]=r=a.w,b[s++]=a.o-e-1),c=a.Ec;;){if(q>=e||0==c--){a.M[u]=a.M[v]=0;break}if(i=a.o-e,h=(a.k>=i?a.k-i:a.k-i+a.p)<<1,t=a.f+e,m=o>n?n:o,a.c[t+m]==a.c[d+m]){for(;++m!=p&&a.c[t+m]==a.c[d+m];);if(m>r&&(b[s++]=r=m,b[s++]=i-1,m==p)){a.M[v]=a.M[h],a.M[u]=a.M[h+1];break}}(255&a.c[d+m])>(255&a.c[t+m])?(a.M[v]=e,v=h+1,e=a.M[v],o=m):(a.M[u]=e,u=h,e=a.M[u],n=m)}return P(a),s}function O(a){a.f=0,a.o=0,a.h=0,a.X=0,K(a),a.k=0,L(a,-1)}function P(a){var b;++a.k>=a.p&&(a.k=0),J(a),1073741823==a.o&&(b=a.o-a.p,Q(a.M,2*a.p,b),Q(a.qb,a.sc,b),L(a,b))}function Q(a,b,c){var d,e;for(d=0;b>d;++d)e=a[d]||0,c>=e?e=0:e-=c,a[d]=e}function R(a,b){a.rb=b>2,a.rb?(a.w=0,a.xb=4,a.N=66560):(a.w=2,a.xb=3,a.N=0)}function S(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;
do{if(a.h>=a.o+a.ub)n=a.ub;else if(n=a.h-a.o,a.xb>n){P(a);continue}for(o=a.o>a.p?a.o-a.p:0,d=a.f+a.o,a.rb?(s=Qb[255&a.c[d]]^255&a.c[d+1],h=1023&s,a.qb[h]=a.o,s^=(255&a.c[d+2])<<8,i=65535&s,a.qb[1024+i]=a.o,j=(s^Qb[255&a.c[d+3]]<<5)&a.Fc):j=255&a.c[d]^(255&a.c[d+1])<<8,e=a.qb[a.N+j],a.qb[a.N+j]=a.o,q=(a.k<<1)+1,r=a.k<<1,l=m=a.w,c=a.Ec;;){if(o>=e||0==c--){a.M[q]=a.M[r]=0;break}if(g=a.o-e,f=(a.k>=g?a.k-g:a.k-g+a.p)<<1,p=a.f+e,k=m>l?l:m,a.c[p+k]==a.c[d+k]){for(;++k!=n&&a.c[p+k]==a.c[d+k];);if(k==n){a.M[r]=a.M[f],a.M[q]=a.M[f+1];break}}(255&a.c[d+k])>(255&a.c[p+k])?(a.M[r]=e,r=f+1,e=a.M[r],m=k):(a.M[q]=e,q=f,e=a.M[q],l=k)}P(a)}while(0!=--b)}function T(a,b,c){var d=a.o-b-1;for(0>d&&(d+=a.L);0!=c;--c)d>=a.L&&(d=0),a.Kb[a.o++]=a.Kb[d++],a.o>=a.L&&V(a)}function U(a,c){(null==a.Kb||a.L!=c)&&(a.Kb=b(c)),a.L=c,a.o=0,a.h=0}function V(a){var b=a.o-a.h;b&&(w(a.bc,a.Kb,a.h,b),a.o>=a.L&&(a.o=0),a.h=a.o)}function W(a,b){var c=a.o-b-1;return 0>c&&(c+=a.L),a.Kb[c]}function X(a,b){a.Kb[a.o++]=b,a.o>=a.L&&V(a)}function Y(a){V(a),a.bc=null}function Z(a){return a-=2,4>a?a:3}function $(a){return 4>a?0:10>a?a-3:a-6}function _(a,b){return a.cb=b,a.$=null,a.zc=1,a}function aa(a,b){return a.$=b,a.cb=null,a.zc=1,a}function ba(a){if(!a.zc)throw Error("bad state");return a.cb?da(a):ca(a),a.zc}function ca(a){var b=fa(a.$);if(-1==b)throw Error("corrupted input");a.Sb=Mb,a.Pc=a.$.g,(b||f(a.$.Nc,Ob)>=0&&f(a.$.g,a.$.Nc)>=0)&&(V(a.$.B),Y(a.$.B),a.$.e.zb=null,a.zc=0)}function da(a){xa(a.cb,a.cb.Ub,a.cb.vc,a.cb.Kc),a.Sb=a.cb.Ub[0],a.cb.Kc[0]&&(La(a.cb),a.zc=0)}function ea(a,b,c,d){return a.e.zb=b,Y(a.B),a.B.bc=c,ha(a),a.W=0,a.ib=0,a.Jc=0,a.Ic=0,a.Qc=0,a.Nc=d,a.g=Ob,a.gc=0,aa({},a)}function fa(a){var b,d,e,g,h,k;if(k=j(a.g)&a.Dc,sb(a.e,a.Gb,(a.W<<4)+k)){if(sb(a.e,a.Wb,a.W))e=0,sb(a.e,a.Cb,a.W)?(sb(a.e,a.Db,a.W)?(sb(a.e,a.Eb,a.W)?(d=a.Qc,a.Qc=a.Ic):d=a.Ic,a.Ic=a.Jc):d=a.Jc,a.Jc=a.ib,a.ib=d):sb(a.e,a.tb,(a.W<<4)+k)||(a.W=7>a.W?9:11,e=1),e||(e=ma(a.sb,a.e,k)+2,a.W=7>a.W?8:11);else if(a.Qc=a.Ic,a.Ic=a.Jc,a.Jc=a.ib,e=2+ma(a.Mb,a.e,k),a.W=7>a.W?7:10,h=ib(a.kb[Z(e)],a.e),h>=4){if(g=(h>>1)-1,a.ib=(2|1&h)<<g,14>h)a.ib+=kb(a.jc,a.ib-h-1,a.e,g);else if(a.ib+=tb(a.e,g-4)<<4,a.ib+=jb(a.Bb,a.e),0>a.ib)return-1==a.ib?1:-1}else a.ib=h;if(f(i(a.ib),a.g)>=0||a.ib>=a.mb)return-1;T(a.B,a.ib,e),a.g=c(a.g,i(e)),a.gc=W(a.B,0)}else b=qa(a.jb,j(a.g),a.gc),a.gc=7>a.W?sa(b,a.e):ta(b,a.e,W(a.B,a.ib)),X(a.B,a.gc),a.W=$(a.W),a.g=c(a.g,Pb);return 0}function ga(a){a.B={},a.e={},a.Gb=b(192),a.Wb=b(12),a.Cb=b(12),a.Db=b(12),a.Eb=b(12),a.tb=b(192),a.kb=b(4),a.jc=b(114),a.Bb=hb({},4),a.Mb=na({}),a.sb=na({}),a.jb={};for(var c=0;4>c;++c)a.kb[c]=hb({},6);return a}function ha(a){a.B.h=0,a.B.o=0,vb(a.Gb),vb(a.tb),vb(a.Wb),vb(a.Cb),vb(a.Db),vb(a.Eb),vb(a.jc),ra(a.jb);for(var b=0;4>b;++b)vb(a.kb[b].G);oa(a.Mb),oa(a.sb),vb(a.Bb.G),ub(a.e)}function ia(a,b){var c,d,e,f,g,h,i;if(5>b.length)return 0;for(i=255&b[0],e=i%9,h=~~(i/9),f=h%5,g=~~(h/5),c=0,d=0;4>d;++d)c+=(255&b[1+d])<<8*d;return c>99999999||!ka(a,e,f,g)?0:ja(a,c)}function ja(a,b){return 0>b?0:(a.Pb!=b&&(a.Pb=b,a.mb=Math.max(a.Pb,1),U(a.B,Math.max(a.mb,4096))),1)}function ka(a,b,c,d){if(b>8||c>4||d>4)return 0;pa(a.jb,c,b);var e=1<<d;return la(a.Mb,e),la(a.sb,e),a.Dc=e-1,1}function la(a,b){for(;b>a.P;++a.P)a.ec[a.P]=hb({},3),a.hc[a.P]=hb({},3)}function ma(a,b,c){if(!sb(b,a.uc,0))return ib(a.ec[c],b);var d=8;return d+=sb(b,a.uc,1)?8+ib(a.tc,b):ib(a.hc[c],b)}function na(a){return a.uc=b(2),a.ec=b(16),a.hc=b(16),a.tc=hb({},8),a.P=0,a}function oa(a){vb(a.uc);for(var b=0;a.P>b;++b)vb(a.ec[b].G),vb(a.hc[b].G);vb(a.tc.G)}function pa(a,c,d){var e,f;if(null==a.V||a.u!=d||a.I!=c)for(a.I=c,a.oc=(1<<c)-1,a.u=d,f=1<<a.u+a.I,a.V=b(f),e=0;f>e;++e)a.V[e]=ua({})}function qa(a,b,c){return a.V[((b&a.oc)<<a.u)+((255&c)>>>8-a.u)]}function ra(a){var b,c;for(c=1<<a.u+a.I,b=0;c>b;++b)vb(a.V[b].Hb)}function sa(a,b){var c=1;do c=c<<1|sb(b,a.Hb,c);while(256>c);return c<<24>>24}function ta(a,b,c){var d,e,f=1;do if(e=c>>7&1,c<<=1,d=sb(b,a.Hb,(1+e<<8)+f),f=f<<1|d,e!=d){for(;256>f;)f=f<<1|sb(b,a.Hb,f);break}while(256>f);return f<<24>>24}function ua(a){return a.Hb=b(768),a}function va(a,b){var c,d,e,f;a.lb=b,e=a.a[b].r,d=a.a[b].j;do a.a[b].t&&(fb(a.a[e]),a.a[e].r=e-1,a.a[b].yc&&(a.a[e-1].t=0,a.a[e-1].r=a.a[b].r2,a.a[e-1].j=a.a[b].j2)),f=e,c=d,d=a.a[f].j,e=a.a[f].r,a.a[f].j=c,a.a[f].r=b,b=f;while(b>0);return a.nb=a.a[0].j,a.q=a.a[0].r}function wa(a){a.l=0,a.J=0;for(var b=0;4>b;++b)a.v[b]=0}function xa(a,b,d,e){var g,k,l,m,n,o,q,r,s,t,u,v,w,x,y;if(b[0]=Ob,d[0]=Ob,e[0]=1,a.kc&&(a.b.bc=a.kc,O(a.b),a.S=1,a.kc=null),!a.lc){if(a.lc=1,x=a.g,h(a.g,Ob)){if(!H(a.b))return void Ca(a,j(a.g));Ja(a),w=j(a.g)&a.y,wb(a.d,a.C,(a.l<<4)+w,0),a.l=$(a.l),l=F(a.b,-a.s),bb(_a(a.A,j(a.g),a.J),a.d,l),a.J=l,--a.s,a.g=c(a.g,Pb)}if(!H(a.b))return void Ca(a,j(a.g));for(;;){if(q=Da(a,j(a.g)),t=a.nb,w=j(a.g)&a.y,k=(a.l<<4)+w,1==q&&-1==t)wb(a.d,a.C,k,0),l=F(a.b,-a.s),y=_a(a.A,j(a.g),a.J),7>a.l?bb(y,a.d,l):(s=F(a.b,-a.v[0]-1-a.s),cb(y,a.d,s,l)),a.J=l,a.l=$(a.l);else{if(wb(a.d,a.C,k,1),4>t){if(wb(a.d,a.bb,a.l,1),t?(wb(a.d,a.gb,a.l,1),1==t?wb(a.d,a.Ob,a.l,0):(wb(a.d,a.Ob,a.l,1),wb(a.d,a.wc,a.l,t-2))):(wb(a.d,a.gb,a.l,0),1==q?wb(a.d,a.Z,k,0):wb(a.d,a.Z,k,1)),1==q?a.l=7>a.l?9:11:(Wa(a.i,a.d,q-2,w),a.l=7>a.l?8:11),m=a.v[t],0!=t){for(o=t;o>=1;--o)a.v[o]=a.v[o-1];a.v[0]=m}}else{for(wb(a.d,a.bb,a.l,0),a.l=7>a.l?7:10,Wa(a._,a.d,q-2,w),t-=4,v=Qa(t),r=Z(q),mb(a.K[r],a.d,v),v>=4&&(n=(v>>1)-1,g=(2|1&v)<<n,u=t-g,14>v?qb(a.Lb,g-v-1,a.d,n,u):(xb(a.d,u>>4,n-4),ob(a.U,a.d,15&u),++a.Qb)),m=t,o=3;o>=1;--o)a.v[o]=a.v[o-1];a.v[0]=m,++a.Rb}a.J=F(a.b,q-1-a.s)}if(a.s-=q,a.g=c(a.g,i(q)),!a.s){if(a.Rb>=128&&Ba(a),a.Qb>=16&&Aa(a),b[0]=a.g,d[0]=yb(a.d),!H(a.b))return void Ca(a,j(a.g));if(f(p(a.g,x),[4096,0])>=0)return a.lc=0,void(e[0]=0)}}}}function ya(a){var b,c;a.b||(b={},c=4,a.T||(c=2),R(b,c),a.b=b),$a(a.A,a.eb,a.fb),(a.ab!=a.wb||a.Fb!=a.n)&&(M(a.b,a.ab,4096,a.n,274),a.wb=a.ab,a.Fb=a.n)}function za(a){var c;for(a.v=b(4),a.a=[],a.d={},a.C=b(192),a.bb=b(12),a.gb=b(12),a.Ob=b(12),a.wc=b(12),a.Z=b(192),a.K=[],a.Lb=b(114),a.U=lb({},4),a._=Xa({}),a.i=Xa({}),a.A={},a.m=[],a.R=[],a.hb=[],a.mc=b(16),a.x=b(4),a.O=b(4),a.Ub=[Ob],a.vc=[Ob],a.Kc=[0],a.fc=b(5),a.xc=b(128),a.vb=0,a.T=1,a.D=0,a.Fb=-1,a.nb=0,c=0;4096>c;++c)a.a[c]={};for(c=0;4>c;++c)a.K[c]=lb({},6);return a}function Aa(a){for(var b=0;16>b;++b)a.mc[b]=pb(a.U,b);a.Qb=0}function Ba(a){var b,c,d,e,f,g,h,i;for(e=4;128>e;++e)g=Qa(e),d=(g>>1)-1,b=(2|1&g)<<d,a.xc[e]=rb(a.Lb,b-g-1,d,e-b);for(f=0;4>f;++f){for(c=a.K[f],h=f<<6,g=0;a.cc>g;++g)a.R[h+g]=nb(c,g);for(g=14;a.cc>g;++g)a.R[h+g]+=(g>>1)-1-4<<6;for(i=128*f,e=0;4>e;++e)a.hb[i+e]=a.R[h+e];for(;128>e;++e)a.hb[i+e]=a.R[h+Qa(e)]+a.xc[e]}a.Rb=0}function Ca(a,b){Ka(a),Pa(a,b&a.y);for(var c=0;5>c;++c)Ab(a.d)}function Da(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,aa,ba;if(a.lb!=a.q)return o=a.a[a.q].r-a.q,a.nb=a.a[a.q].j,a.q=a.a[a.q].r,o;if(a.q=a.lb=0,a.Q?(n=a.vb,a.Q=0):n=Ja(a),C=a.D,A=H(a.b)+1,2>A)return a.nb=-1,1;for(A>273&&(A=273),S=0,k=0;4>k;++k)a.x[k]=a.v[k],a.O[k]=G(a.b,-1,a.x[k],273),a.O[k]>a.O[S]&&(S=k);if(a.O[S]>=a.n)return a.nb=S,o=a.O[S],Ia(a,o-1),o;if(n>=a.n)return a.nb=a.m[C-1]+4,Ia(a,n-1),n;if(i=F(a.b,-1),s=F(a.b,-a.v[0]-1-1),2>n&&i!=s&&2>a.O[S])return a.nb=-1,1;if(a.a[0].Hc=a.l,M=b&a.y,a.a[1].z=Sb[a.C[(a.l<<4)+M]>>>2]+eb(_a(a.A,b,a.J),a.l>=7,s,i),fb(a.a[1]),t=Sb[2048-a.C[(a.l<<4)+M]>>>2],R=t+Sb[2048-a.bb[a.l]>>>2],s==i&&(T=R+Ga(a,a.l,M),a.a[1].z>T&&(a.a[1].z=T,gb(a.a[1]))),m=n>=a.O[S]?n:a.O[S],2>m)return a.nb=a.a[1].j,1;a.a[1].r=0,a.a[0].Yb=a.x[0],a.a[0].Zb=a.x[1],a.a[0].$b=a.x[2],a.a[0].pc=a.x[3],l=m;do a.a[l--].z=268435455;while(l>=2);for(k=0;4>k;++k)if(Q=a.O[k],!(2>Q)){O=R+Fa(a,k,a.l,M);do f=O+Ya(a.i,Q-2,M),J=a.a[Q],J.z>f&&(J.z=f,J.r=0,J.j=k,J.t=0);while(--Q>=2)}if(z=t+Sb[a.bb[a.l]>>>2],l=a.O[0]>=2?a.O[0]+1:2,n>=l){for(D=0;l>a.m[D];)D+=2;for(;j=a.m[D+1],f=z+Ea(a,j,l,M),J=a.a[l],J.z>f&&(J.z=f,J.r=0,J.j=j+4,J.t=0),l!=a.m[D]||(D+=2,D!=C);++l);}for(c=0;;){if(++c,c==m)return va(a,c);if(u=Ja(a),C=a.D,u>=a.n)return a.vb=u,a.Q=1,va(a,c);if(++b,L=a.a[c].r,a.a[c].t?(--L,a.a[c].yc?(V=a.a[a.a[c].r2].Hc,V=4>a.a[c].j2?7>V?8:11:7>V?7:10):V=a.a[L].Hc,V=$(V)):V=a.a[L].Hc,L==c-1?V=a.a[c].j?$(V):7>V?9:11:(a.a[c].t&&a.a[c].yc?(L=a.a[c].r2,K=a.a[c].j2,V=7>V?8:11):(K=a.a[c].j,V=4>K?7>V?8:11:7>V?7:10),I=a.a[L],4>K?K?1==K?(a.x[0]=I.Zb,a.x[1]=I.Yb,a.x[2]=I.$b,a.x[3]=I.pc):2==K?(a.x[0]=I.$b,a.x[1]=I.Yb,a.x[2]=I.Zb,a.x[3]=I.pc):(a.x[0]=I.pc,a.x[1]=I.Yb,a.x[2]=I.Zb,a.x[3]=I.$b):(a.x[0]=I.Yb,a.x[1]=I.Zb,a.x[2]=I.$b,a.x[3]=I.pc):(a.x[0]=K-4,a.x[1]=I.Yb,a.x[2]=I.Zb,a.x[3]=I.$b)),a.a[c].Hc=V,a.a[c].Yb=a.x[0],a.a[c].Zb=a.x[1],a.a[c].$b=a.x[2],a.a[c].pc=a.x[3],h=a.a[c].z,i=F(a.b,-1),s=F(a.b,-a.x[0]-1-1),M=b&a.y,d=h+Sb[a.C[(V<<4)+M]>>>2]+eb(_a(a.A,b,F(a.b,-2)),V>=7,s,i),x=a.a[c+1],v=0,x.z>d&&(x.z=d,x.r=c,x.j=-1,x.t=0,v=1),t=h+Sb[2048-a.C[(V<<4)+M]>>>2],R=t+Sb[2048-a.bb[V]>>>2],s!=i||c>x.r&&!x.j||(T=R+(Sb[a.gb[V]>>>2]+Sb[a.Z[(V<<4)+M]>>>2]),x.z>=T&&(x.z=T,x.r=c,x.j=0,x.t=0,v=1)),B=H(a.b)+1,B=B>4095-c?4095-c:B,A=B,!(2>A)){if(A>a.n&&(A=a.n),!v&&s!=i&&(X=Math.min(B-1,a.n),q=G(a.b,0,a.x[0],X),q>=2)){for(W=$(V),N=b+1&a.y,y=d+Sb[2048-a.C[(W<<4)+N]>>>2]+Sb[2048-a.bb[W]>>>2],E=c+1+q;E>m;)a.a[++m].z=268435455;f=y+(Y=Ya(a.i,q-2,N),Y+Fa(a,0,W,N)),J=a.a[E],J.z>f&&(J.z=f,J.r=c+1,J.j=0,J.t=1,J.yc=0)}for(U=2,P=0;4>P;++P)if(p=G(a.b,-1,a.x[P],A),!(2>p)){r=p;do{for(;c+p>m;)a.a[++m].z=268435455;f=R+(Z=Ya(a.i,p-2,M),Z+Fa(a,P,V,M)),J=a.a[c+p],J.z>f&&(J.z=f,J.r=c,J.j=P,J.t=0)}while(--p>=2);if(p=r,P||(U=p+1),B>p&&(X=Math.min(B-1-p,a.n),q=G(a.b,p,a.x[P],X),q>=2)){for(W=7>V?8:11,N=b+p&a.y,e=R+(_=Ya(a.i,p-2,M),_+Fa(a,P,V,M))+Sb[a.C[(W<<4)+N]>>>2]+eb(_a(a.A,b+p,F(a.b,p-1-1)),1,F(a.b,p-1-(a.x[P]+1)),F(a.b,p-1)),W=$(W),N=b+p+1&a.y,w=e+Sb[2048-a.C[(W<<4)+N]>>>2],y=w+Sb[2048-a.bb[W]>>>2],E=p+1+q;c+E>m;)a.a[++m].z=268435455;f=y+(aa=Ya(a.i,q-2,N),aa+Fa(a,0,W,N)),J=a.a[c+E],J.z>f&&(J.z=f,J.r=c+p+1,J.j=0,J.t=1,J.yc=1,J.r2=c,J.j2=P)}}if(u>A){for(u=A,C=0;u>a.m[C];C+=2);a.m[C]=u,C+=2}if(u>=U){for(z=t+Sb[a.bb[V]>>>2];c+u>m;)a.a[++m].z=268435455;for(D=0;U>a.m[D];)D+=2;for(p=U;;++p)if(g=a.m[D+1],f=z+Ea(a,g,p,M),J=a.a[c+p],J.z>f&&(J.z=f,J.r=c,J.j=g+4,J.t=0),p==a.m[D]){if(B>p&&(X=Math.min(B-1-p,a.n),q=G(a.b,p,g,X),q>=2)){for(W=7>V?7:10,N=b+p&a.y,e=f+Sb[a.C[(W<<4)+N]>>>2]+eb(_a(a.A,b+p,F(a.b,p-1-1)),1,F(a.b,p-(g+1)-1),F(a.b,p-1)),W=$(W),N=b+p+1&a.y,w=e+Sb[2048-a.C[(W<<4)+N]>>>2],y=w+Sb[2048-a.bb[W]>>>2],E=p+1+q;c+E>m;)a.a[++m].z=268435455;f=y+(ba=Ya(a.i,q-2,N),ba+Fa(a,0,W,N)),J=a.a[c+E],J.z>f&&(J.z=f,J.r=c+p+1,J.j=0,J.t=1,J.yc=1,J.r2=c,J.j2=g+4)}if(D+=2,D==C)break}}}}}function Ea(a,b,c,d){var e,f=Z(c);return e=128>b?a.hb[128*f+b]:a.R[(f<<6)+Ra(b)]+a.mc[15&b],e+Ya(a._,c-2,d)}function Fa(a,b,c,d){var e;return b?(e=Sb[2048-a.gb[c]>>>2],1==b?e+=Sb[a.Ob[c]>>>2]:(e+=Sb[2048-a.Ob[c]>>>2],e+=Bb(a.wc[c],b-2))):(e=Sb[a.gb[c]>>>2],e+=Sb[2048-a.Z[(c<<4)+d]>>>2]),e}function Ga(a,b,c){return Sb[a.gb[b]>>>2]+Sb[a.Z[(b<<4)+c]>>>2]}function Ha(a){wa(a),zb(a.d),vb(a.C),vb(a.Z),vb(a.bb),vb(a.gb),vb(a.Ob),vb(a.wc),vb(a.Lb),ab(a.A);for(var b=0;4>b;++b)vb(a.K[b].G);Ua(a._,1<<a.Y),Ua(a.i,1<<a.Y),vb(a.U.G),a.Q=0,a.lb=0,a.q=0,a.s=0}function Ia(a,b){b>0&&(S(a.b,b),a.s+=b)}function Ja(a){var b=0;return a.D=N(a.b,a.m),a.D>0&&(b=a.m[a.D-2],b==a.n&&(b+=G(a.b,b-1,a.m[a.D-1],273-b))),++a.s,b}function Ka(a){a.b&&a.S&&(a.b.bc=null,a.S=0)}function La(a){Ka(a),a.d.zb=null}function Ma(a,b){a.ab=b;for(var c=0;b>1<<c;++c);a.cc=2*c}function Na(a,b){var c=a.T;a.T=b,a.b&&c!=a.T&&(a.wb=-1,a.b=null)}function Oa(a,b){a.fc[0]=9*(5*a.Y+a.eb)+a.fb<<24>>24;for(var c=0;4>c;++c)a.fc[1+c]=a.ab>>8*c<<24>>24;w(b,a.fc,0,5)}function Pa(a,b){if(a.Gc){wb(a.d,a.C,(a.l<<4)+b,1),wb(a.d,a.bb,a.l,0),a.l=7>a.l?7:10,Wa(a._,a.d,0,b);var c=Z(2);mb(a.K[c],a.d,63),xb(a.d,67108863,26),ob(a.U,a.d,15)}}function Qa(a){return 2048>a?Rb[a]:2097152>a?Rb[a>>10]+20:Rb[a>>20]+40}function Ra(a){return 131072>a?Rb[a>>6]+12:134217728>a?Rb[a>>16]+32:Rb[a>>26]+52}function Sa(a,b,c,d){8>c?(wb(b,a.db,0,0),mb(a.Tb[d],b,c)):(c-=8,wb(b,a.db,0,1),8>c?(wb(b,a.db,1,0),mb(a.Xb[d],b,c)):(wb(b,a.db,1,1),mb(a.dc,b,c-8)))}function Ta(a){a.db=b(2),a.Tb=b(16),a.Xb=b(16),a.dc=lb({},8);for(var c=0;16>c;++c)a.Tb[c]=lb({},3),a.Xb[c]=lb({},3);return a}function Ua(a,b){vb(a.db);for(var c=0;b>c;++c)vb(a.Tb[c].G),vb(a.Xb[c].G);vb(a.dc.G)}function Va(a,b,c,d,e){var f,g,h,i,j;for(f=Sb[a.db[0]>>>2],g=Sb[2048-a.db[0]>>>2],h=g+Sb[a.db[1]>>>2],i=g+Sb[2048-a.db[1]>>>2],j=0,j=0;8>j;++j){if(j>=c)return;d[e+j]=f+nb(a.Tb[b],j)}for(;16>j;++j){if(j>=c)return;d[e+j]=h+nb(a.Xb[b],j-8)}for(;c>j;++j)d[e+j]=i+nb(a.dc,j-8-8)}function Wa(a,b,c,d){Sa(a,b,c,d),0==--a.nc[d]&&(Va(a,d,a.pb,a.Cc,272*d),a.nc[d]=a.pb)}function Xa(a){return Ta(a),a.Cc=[],a.nc=[],a}function Ya(a,b,c){return a.Cc[272*c+b]}function Za(a,b){for(var c=0;b>c;++c)Va(a,c,a.pb,a.Cc,272*c),a.nc[c]=a.pb}function $a(a,c,d){var e,f;if(null==a.V||a.u!=d||a.I!=c)for(a.I=c,a.oc=(1<<c)-1,a.u=d,f=1<<a.u+a.I,a.V=b(f),e=0;f>e;++e)a.V[e]=db({})}function _a(a,b,c){return a.V[((b&a.oc)<<a.u)+((255&c)>>>8-a.u)]}function ab(a){var b,c=1<<a.u+a.I;for(b=0;c>b;++b)vb(a.V[b].ob)}function bb(a,b,c){var d,e,f=1;for(e=7;e>=0;--e)d=c>>e&1,wb(b,a.ob,f,d),f=f<<1|d}function cb(a,b,c,d){var e,f,g,h,i=1,j=1;for(f=7;f>=0;--f)e=d>>f&1,h=j,i&&(g=c>>f&1,h+=1+g<<8,i=g==e),wb(b,a.ob,h,e),j=j<<1|e}function db(a){return a.ob=b(768),a}function eb(a,b,c,d){var e,f,g=1,h=7,i=0;if(b)for(;h>=0;--h)if(f=c>>h&1,e=d>>h&1,i+=Bb(a.ob[(1+f<<8)+g],e),g=g<<1|e,f!=e){--h;break}for(;h>=0;--h)e=d>>h&1,i+=Bb(a.ob[g],e),g=g<<1|e;return i}function fb(a){a.j=-1,a.t=0}function gb(a){a.j=0,a.t=0}function hb(a,c){return a.F=c,a.G=b(1<<c),a}function ib(a,b){var c,d=1;for(c=a.F;0!=c;--c)d=(d<<1)+sb(b,a.G,d);return d-(1<<a.F)}function jb(a,b){var c,d,e=1,f=0;for(d=0;a.F>d;++d)c=sb(b,a.G,e),e<<=1,e+=c,f|=c<<d;return f}function kb(a,b,c,d){var e,f,g=1,h=0;for(f=0;d>f;++f)e=sb(c,a,b+g),g<<=1,g+=e,h|=e<<f;return h}function lb(a,c){return a.F=c,a.G=b(1<<c),a}function mb(a,b,c){var d,e,f=1;for(e=a.F;0!=e;)--e,d=c>>>e&1,wb(b,a.G,f,d),f=f<<1|d}function nb(a,b){var c,d,e=1,f=0;for(d=a.F;0!=d;)--d,c=b>>>d&1,f+=Bb(a.G[e],c),e=(e<<1)+c;return f}function ob(a,b,c){var d,e,f=1;for(e=0;a.F>e;++e)d=1&c,wb(b,a.G,f,d),f=f<<1|d,c>>=1}function pb(a,b){var c,d,e=1,f=0;for(d=a.F;0!=d;--d)c=1&b,b>>>=1,f+=Bb(a.G[e],c),e=e<<1|c;return f}function qb(a,b,c,d,e){var f,g,h=1;for(g=0;d>g;++g)f=1&e,wb(c,a,b+h,f),h=h<<1|f,e>>=1}function rb(a,b,c,d){var e,f,g=1,h=0;for(f=c;0!=f;--f)e=1&d,d>>>=1,h+=Sb[(2047&(a[b+g]-e^-e))>>>2],g=g<<1|e;return h}function sb(a,b,c){var d,e=b[c];return d=(a.E>>>11)*e,(-2147483648^d)>(-2147483648^a.Ab)?(a.E=d,b[c]=e+(2048-e>>>5)<<16>>16,-16777216&a.E||(a.Ab=a.Ab<<8|r(a.zb),a.E<<=8),0):(a.E-=d,a.Ab-=d,b[c]=e-(e>>>5)<<16>>16,-16777216&a.E||(a.Ab=a.Ab<<8|r(a.zb),a.E<<=8),1)}function tb(a,b){var c,d,e=0;for(c=b;0!=c;--c)a.E>>>=1,d=a.Ab-a.E>>>31,a.Ab-=a.E&d-1,e=e<<1|1-d,-16777216&a.E||(a.Ab=a.Ab<<8|r(a.zb),a.E<<=8);return e}function ub(a){a.Ab=0,a.E=-1;for(var b=0;5>b;++b)a.Ab=a.Ab<<8|r(a.zb)}function vb(a){for(var b=a.length-1;b>=0;--b)a[b]=1024}function wb(a,b,e,f){var g,h=b[e];g=(a.E>>>11)*h,f?(a.Ac=c(a.Ac,d(i(g),[4294967295,0])),a.E-=g,b[e]=h-(h>>>5)<<16>>16):(a.E=g,b[e]=h+(2048-h>>>5)<<16>>16),-16777216&a.E||(a.E<<=8,Ab(a))}function xb(a,b,d){for(var e=d-1;e>=0;--e)a.E>>>=1,1==(b>>>e&1)&&(a.Ac=c(a.Ac,i(a.E))),-16777216&a.E||(a.E<<=8,Ab(a))}function yb(a){return c(c(i(a.Ib),a.qc),[4,0])}function zb(a){a.qc=Ob,a.Ac=Ob,a.E=-1,a.Ib=1,a.Oc=0}function Ab(a){var b,e=j(o(a.Ac,32));if(0!=e||f(a.Ac,[4278190080,0])<0){a.qc=c(a.qc,i(a.Ib)),b=a.Oc;do v(a.zb,b+e),b=255;while(0!=--a.Ib);a.Oc=j(a.Ac)>>>24}++a.Ib,a.Ac=m(d(a.Ac,[16777215,0]),8)}function Bb(a,b){return Sb[(2047&(a-b^-b))>>>2]}function Cb(a){for(var b,c,d,e=0,f=0,g=a.length,h=[],i=[];g>e;++e,++f){if(b=255&a[e],128&b)if(192==(224&b)){if(e+1>=g)return a;if(c=255&a[++e],128!=(192&c))return a;i[f]=(31&b)<<6|63&c}else{if(224!=(240&b))return a;if(e+2>=g)return a;if(c=255&a[++e],128!=(192&c))return a;if(d=255&a[++e],128!=(192&d))return a;i[f]=(15&b)<<12|(63&c)<<6|63&d}else{if(!b)return a;i[f]=b}16383==f&&(h.push(String.fromCharCode.apply(String,i)),f=-1)}return f>0&&(i.length=f,h.push(String.fromCharCode.apply(String,i))),h.join("")}function Db(a){var b,c,d,e=[],f=0,g=a.length;if("object"==typeof a)return a;for(x(a,0,g,e,0),d=0;g>d;++d)b=e[d],b>=1&&127>=b?++f:f+=!b||b>=128&&2047>=b?2:3;for(c=[],f=0,d=0;g>d;++d)b=e[d],b>=1&&127>=b?c[f++]=b<<24>>24:!b||b>=128&&2047>=b?(c[f++]=(192|b>>6&31)<<24>>24,c[f++]=(128|63&b)<<24>>24):(c[f++]=(224|b>>12&15)<<24>>24,c[f++]=(128|b>>6&63)<<24>>24,c[f++]=(128|63&b)<<24>>24);return c}function Eb(a){return a[1]+a[0]}function Fb(b,c,d,e){function f(){for(var b,c=(new Date).getTime();ba(i.c.ac);)if(g=Eb(i.c.ac.Sb)/Eb(i.c.Nb),(new Date).getTime()-c>200)return e?e(g):void 0!==h&&a(g,h),Kb(f,0),0;e?e(1):void 0!==h&&a(1,h),b=u(i.c.rc),d?d(b):void 0!==h&&postMessage({action:Hb,cbn:h,result:b})}var g,h,i={};"function"!=typeof d&&(h=d,d=e=0),i.c=B({},Db(b),Tb(c)),e?e(0):void 0!==h&&a(0,h),Kb(f,0)}function Gb(b,c,d){function e(){for(var b,k=0,l=(new Date).getTime();ba(j.d.ac);)if(++k%1e3==0&&(new Date).getTime()-l>200)return h&&(f=Eb(j.d.ac.$.g)/i,d?d(f):void 0!==g&&a(f,g)),Kb(e,0),0;h&&(d?d(1):void 0!==g&&a(1,g)),b=Cb(u(j.d.rc)),c?c(b):void 0!==g&&postMessage({action:Ib,cbn:g,result:b})}var f,g,h,i,j={};"function"!=typeof c&&(g=c,c=d=0),j.d=D({},b),i=Eb(j.d.Nb),h=i>-1,d?d(h?0:-1):void 0!==g&&a(h?0:-1,g),Kb(e,0)}var Hb=1,Ib=2,Jb=3,Kb="function"==typeof setImmediate?setImmediate:setTimeout,Lb=4294967296,Mb=[4294967295,-Lb],Nb=[0,-0x8000000000000000],Ob=[0,0],Pb=[1,0],Qb=function(){var a,b,c,d=[];for(a=0;256>a;++a){for(c=a,b=0;8>b;++b)0!=(1&c)?c=c>>>1^-306674912:c>>>=1;d[a]=c}return d}(),Rb=function(){var a,b,c,d=2,e=[0,1];for(c=2;22>c;++c)for(b=1<<(c>>1)-1,a=0;b>a;++a,++d)e[d]=c<<24>>24;return e}(),Sb=function(){var a,b,c,d,e=[];for(b=8;b>=0;--b)for(d=1<<9-b-1,a=1<<9-b,c=d;a>c;++c)e[c]=(b<<6)+(a-c<<6>>>9-b-1);return e}(),Tb=function(){var a=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];return function(b){return a[b-1]||a[6]}}();return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||!function(){onmessage=function(a){a&&a.ic&&(a.ic.action==Ib?e.decompress(a.ic.ic,a.ic.cbn):a.ic.action==Hb&&e.compress(a.ic.ic,a.ic.Rc,a.ic.cbn))}}(),{compress:Fb,decompress:Gb}}();this.LZMA=this.LZMA_WORKER=e;var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=d.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;return b&&c.mixIn(b),c.$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.$super.extend(this)}}}(),f=d.WordArray=e.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes,a=a.sigBytes;if(this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=e.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return f.create(c,b)}}),g=c.enc={},h=g.Hex={stringify:function(a){for(var b=a.words,a=a.sigBytes,c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return f.create(c,b/2)}},i=g.Latin1={stringify:function(a){for(var b=a.words,a=a.sigBytes,c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return f.create(c,b)}},j=g.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},k=d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=f.create(),this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,g=this.blockSize,h=e/(4*g),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0),b=h*g,e=a.min(4*b,e);if(b){for(var i=0;b>i;i+=g)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return f.create(i,e)},clone:function(){var a=e.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=k.extend({init:function(){this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize(),this._hash},clone:function(){var a=k.clone.call(this);return a._hash=this._hash.clone(),a},blockSize:16,_createHelper:function(a){return function(b,c){return a.create(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return l.HMAC.create(a,c).finalize(b)}}});var l=c.algo={};return c}(Math);!function(a){function b(a,b,c,d,e,f,g){return a=a+(b&c|~b&d)+e+g,(a<<f|a>>>32-f)+b}function c(a,b,c,d,e,f,g){return a=a+(b&d|c&~d)+e+g,(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){return a=a+(b^c^d)+e+g,(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return a=a+(c^(b|~d))+e+g,(a<<f|a>>>32-f)+b}var f=CryptoJS,g=f.lib,h=g.WordArray,g=g.Hasher,i=f.algo,j=[];!function(){for(var b=0;64>b;b++)j[b]=4294967296*a.abs(a.sin(b+1))|0}(),i=i.MD5=g.extend({_doReset:function(){this._hash=h.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,f){for(var g=0;16>g;g++){var h=f+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}for(var h=this._hash.words,i=h[0],k=h[1],l=h[2],m=h[3],g=0;64>g;g+=4)16>g?(i=b(i,k,l,m,a[f+g],7,j[g]),m=b(m,i,k,l,a[f+g+1],12,j[g+1]),l=b(l,m,i,k,a[f+g+2],17,j[g+2]),k=b(k,l,m,i,a[f+g+3],22,j[g+3])):32>g?(i=c(i,k,l,m,a[f+(g+1)%16],5,j[g]),m=c(m,i,k,l,a[f+(g+6)%16],9,j[g+1]),l=c(l,m,i,k,a[f+(g+11)%16],14,j[g+2]),k=c(k,l,m,i,a[f+g%16],20,j[g+3])):48>g?(i=d(i,k,l,m,a[f+(3*g+5)%16],4,j[g]),m=d(m,i,k,l,a[f+(3*g+8)%16],11,j[g+1]),l=d(l,m,i,k,a[f+(3*g+11)%16],16,j[g+2]),k=d(k,l,m,i,a[f+(3*g+14)%16],23,j[g+3])):(i=e(i,k,l,m,a[f+3*g%16],6,j[g]),m=e(m,i,k,l,a[f+(3*g+7)%16],10,j[g+1]),l=e(l,m,i,k,a[f+(3*g+14)%16],15,j[g+2]),k=e(k,l,m,i,a[f+(3*g+5)%16],21,j[g+3]));h[0]=h[0]+i|0,h[1]=h[1]+k|0,h[2]=h[2]+l|0,h[3]=h[3]+m|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;for(b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),a.sigBytes=4*(b.length+1),this._process(),a=this._hash.words,b=0;4>b;b++)c=a[b],a[b]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}}),f.MD5=g._createHelper(i),f.HmacMD5=g._createHmacHelper(i)}(Math),!function(a,b){b["true"]=a,function(){if(document.documentElement.animate){var a=document.documentElement.animate([],0),b=!0;if(a&&(b=!1,"play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState".split("|").forEach(function(c){void 0===a[c]&&(b=!0)})),!b)return}var c={},d={},e={},f=null;!function(a){function b(a){if("number"==typeof a)return a;var b={};for(var c in a)b[c]=a[c];return b}function c(){this._delay=0,this._endDelay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear"}function d(b,d){var e=new c;return d&&(e.fill="both",e.duration="auto"),"number"!=typeof b||isNaN(b)?void 0!==b&&Object.getOwnPropertyNames(b).forEach(function(c){if("auto"!=b[c]){if(("number"==typeof e[c]||"duration"==c)&&("number"!=typeof b[c]||isNaN(b[c])))return;if("fill"==c&&-1==s.indexOf(b[c]))return;if("direction"==c&&-1==t.indexOf(b[c]))return;if("playbackRate"==c&&1!==b[c]&&a.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead."))return;e[c]=b[c]}}):e.duration=b,e}function e(a){return"number"==typeof a&&(a=isNaN(a)?{duration:0}:{duration:a}),a}function f(b,c){b=a.numericTimingToObject(b);var e=d(b,c);return e._easing=i(e.easing),e}function g(a,b,c,d){return 0>a||a>1||0>c||c>1?B:function(e){function f(a,b,c){return 3*a*(1-c)*(1-c)*c+3*b*(1-c)*c*c+c*c*c}if(0==e||1==e)return e;for(var g=0,h=1;;){var i=(g+h)/2,j=f(a,c,i);if(Math.abs(e-j)<.001)return f(b,d,i);e>j?g=i:h=i}}}function h(a,b){return function(c){if(c>=1)return 1;var d=1/a;return c+=b*d,c-c%d}}function i(a){var b=z.exec(a);if(b)return g.apply(this,b.slice(1).map(Number));var c=A.exec(a);if(c)return h(Number(c[1]),{start:u,middle:v,end:w}[c[2]]);var d=x[a];return d?d:B}function j(a){return Math.abs(k(a)/a.playbackRate)}function k(a){return a.duration*a.iterations}function l(a,b,c){return null==b?C:b<c.delay?D:b>=c.delay+a?E:F}function m(a,b,c,d,e){switch(d){case D:return"backwards"==b||"both"==b?0:null;case F:return c-e;case E:return"forwards"==b||"both"==b?a:null;case C:return null}}function n(a,b,c,d){return(d.playbackRate<0?b-a:b)*d.playbackRate+c}function o(a,b,c,d,e){return 1/0===c||c===-1/0||c-d==b&&e.iterations&&(e.iterations+e.iterationStart)%1==0?a:c%a}function p(a,b,c,d){return 0===c?0:b==a?d.iterationStart+d.iterations-1:Math.floor(c/a)}function q(a,b,c,d){var e=a%2>=1,f="normal"==d.direction||d.direction==(e?"alternate-reverse":"alternate"),g=f?c:b-c,h=g/b;return b*d.easing(h)}function r(a,b,c){var d=l(a,b,c),e=m(a,c.fill,b,d,c.delay);if(null===e)return null;if(0===a)return d===D?0:1;var f=c.iterationStart*c.duration,g=n(a,e,f,c),h=o(c.duration,k(c),g,f,c),i=p(c.duration,h,g,c);return q(i,c.duration,h,c)/c.duration}var s="backwards|forwards|both|none".split("|"),t="reverse|alternate|alternate-reverse".split("|");c.prototype={_setMember:function(b,c){this["_"+b]=c,this._effect&&(this._effect._timingInput[b]=c,this._effect._timing=a.normalizeTimingInput(a.normalizeTimingInput(this._effect._timingInput)),this._effect.activeDuration=a.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(a){this._setMember("delay",a)},get delay(){return this._delay},set endDelay(a){this._setMember("endDelay",a)},get endDelay(){return this._endDelay},set fill(a){this._setMember("fill",a)},get fill(){return this._fill},set iterationStart(a){this._setMember("iterationStart",a)},get iterationStart(){return this._iterationStart},set duration(a){this._setMember("duration",a)},get duration(){return this._duration},set direction(a){this._setMember("direction",a)},get direction(){return this._direction},set easing(a){this._setMember("easing",a)},get easing(){return this._easing},set iterations(a){this._setMember("iterations",a)},get iterations(){return this._iterations}};var u=1,v=.5,w=0,x={ease:g(.25,.1,.25,1),"ease-in":g(.42,0,1,1),"ease-out":g(0,0,.58,1),"ease-in-out":g(.42,0,.58,1),"step-start":h(1,u),"step-middle":h(1,v),"step-end":h(1,w)},y="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",z=new RegExp("cubic-bezier\\("+y+","+y+","+y+","+y+"\\)"),A=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,B=function(a){return a},C=0,D=1,E=2,F=3;a.cloneTimingInput=b,a.makeTiming=d,a.numericTimingToObject=e,a.normalizeTimingInput=f,a.calculateActiveDuration=j,a.calculateTimeFraction=r,a.calculatePhase=l,a.toTimingFunction=i}(c,f),function(a){function b(a,b){return a in h?h[a][b]||b:b}function c(a,c,d){var g=e[a];if(g){f.style[a]=c;for(var h in g){var i=g[h],j=f.style[i];d[i]=b(i,j)}}else d[a]=b(a,c)}function d(b){function d(){var a=e.length;null==e[a-1].offset&&(e[a-1].offset=1),a>1&&null==e[0].offset&&(e[0].offset=0);for(var b=0,c=e[0].offset,d=1;a>d;d++){var f=e[d].offset;if(null!=f){for(var g=1;d-b>g;g++)e[b+g].offset=c+(f-c)*g/(d-b);b=d,c=f}}}if(!Array.isArray(b)&&null!==b)throw new TypeError("Keyframes must be null or an array of keyframes");if(null==b)return[];for(var e=b.map(function(b){var d={};for(var e in b){var f=b[e];if("offset"==e){if(null!=f&&(f=Number(f),!isFinite(f)))throw new TypeError("keyframe offsets must be numbers.")}else{if("composite"==e)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};f="easing"==e?a.toTimingFunction(f):""+f}c(e,f,d)}return void 0==d.offset&&(d.offset=null),void 0==d.easing&&(d.easing=a.toTimingFunction("linear")),d}),f=!0,g=-1/0,h=0;h<e.length;h++){var i=e[h].offset;if(null!=i){if(g>i)throw{code:DOMException.INVALID_MODIFICATION_ERR,name:"InvalidModificationError",message:"Keyframes are not loosely sorted by offset. Sort or specify offsets."};g=i}else f=!1}return e=e.filter(function(a){return a.offset>=0&&a.offset<=1}),f||d(),e}var e={background:["backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"],border:["borderTopColor","borderTopStyle","borderTopWidth","borderRightColor","borderRightStyle","borderRightWidth","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},f=document.createElementNS("http://www.w3.org/1999/xhtml","div"),g={thin:"1px",medium:"3px",thick:"5px"},h={borderBottomWidth:g,borderLeftWidth:g,borderRightWidth:g,borderTopWidth:g,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:g,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};a.normalizeKeyframes=d}(c,f),function(a){var b={};a.isDeprecated=function(a,c,d,e){var f=e?"are":"is",g=new Date,h=new Date(c);return h.setMonth(h.getMonth()+3),h>g?(a in b||console.warn("Web Animations: "+a+" "+f+" deprecated and will stop working on "+h.toDateString()+". "+d),b[a]=!0,!1):!0},a.deprecated=function(b,c,d,e){var f=e?"are":"is";if(a.isDeprecated(b,c,d,e))throw new Error(b+" "+f+" no longer supported. "+d)}}(c),function(a,b){function c(a){for(var b={},c=0;c<a.length;c++)for(var d in a[c])if("offset"!=d&&"easing"!=d&&"composite"!=d){var e={offset:a[c].offset,easing:a[c].easing,value:a[c][d]};b[d]=b[d]||[],b[d].push(e)}for(var f in b){var g=b[f];if(0!=g[0].offset||1!=g[g.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"}}return b}function d(a){var c=[];for(var d in a)for(var e=a[d],f=0;f<e.length-1;f++){var g=e[f].offset,h=e[f+1].offset,i=e[f].value,j=e[f+1].value;g==h&&(1==h?i=j:j=i),c.push({startTime:g,endTime:h,easing:e[f].easing,property:d,interpolation:b.propertyInterpolation(d,i,j)})}return c.sort(function(a,b){return a.startTime-b.startTime}),c}b.convertEffectInput=function(e){var f=a.normalizeKeyframes(e),g=c(f),h=d(g);
return function(a,c){if(null!=c)h.filter(function(a){return 0>=c&&0==a.startTime||c>=1&&1==a.endTime||c>=a.startTime&&c<=a.endTime}).forEach(function(d){var e=c-d.startTime,f=d.endTime-d.startTime,g=0==f?0:d.easing(e/f);b.apply(a,d.property,d.interpolation(g))});else for(var d in g)"offset"!=d&&"easing"!=d&&"composite"!=d&&b.clear(a,d)}}}(c,d,f),function(a){function b(a,b,c){e[c]=e[c]||[],e[c].push([a,b])}function c(a,c,d){for(var e=0;e<d.length;e++){var f=d[e];b(a,c,f),/-/.test(f)&&b(a,c,f.replace(/-(.)/g,function(a,b){return b.toUpperCase()}))}}function d(b,c,d){if("initial"==c||"initial"==d){var g=b.replace(/-(.)/g,function(a,b){return b.toUpperCase()});"initial"==c&&(c=f[g]),"initial"==d&&(d=f[g])}for(var h=c==d?[]:e[b],i=0;h&&i<h.length;i++){var j=h[i][0](c),k=h[i][0](d);if(void 0!==j&&void 0!==k){var l=h[i][1](j,k);if(l){var m=a.Interpolation.apply(null,l);return function(a){return 0==a?c:1==a?d:m(a)}}}}return a.Interpolation(!1,!0,function(a){return a?d:c})}var e={};a.addPropertiesHandler=c;var f={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};a.propertyInterpolation=d}(d,f),function(a,b){function c(b){var c=a.calculateActiveDuration(b),d=function(d){return a.calculateTimeFraction(c,d,b)};return d._totalDuration=b.delay+c+b.endDelay,d._isCurrent=function(d){var e=a.calculatePhase(c,d,b);return e===PhaseActive||e===PhaseBefore},d}b.KeyframeEffect=function(d,e,f){var g,h=c(a.normalizeTimingInput(f)),i=b.convertEffectInput(e),j=function(){i(d,g)};return j._update=function(a){return g=h(a),null!==g},j._clear=function(){i(d,null)},j._hasSameTarget=function(a){return d===a},j._isCurrent=h._isCurrent,j._totalDuration=h._totalDuration,j},b.NullEffect=function(a){var b=function(){a&&(a(),a=null)};return b._update=function(){return null},b._totalDuration=0,b._isCurrent=function(){return!1},b._hasSameTarget=function(){return!1},b}}(c,d,f),function(a){function b(a,b,c){c.enumerable=!0,c.configurable=!0,Object.defineProperty(a,b,c)}function c(a){this._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style,this._style=a.style,this._length=0,this._isAnimatedProperty={};for(var b=0;b<this._style.length;b++){var c=this._style[b];this._surrogateStyle[c]=this._style[c]}this._updateIndices()}function d(a){if(!a._webAnimationsPatchedStyle){var d=new c(a);try{b(a,"style",{get:function(){return d}})}catch(e){a.style._set=function(b,c){a.style[b]=c},a.style._clear=function(b){a.style[b]=""}}a._webAnimationsPatchedStyle=a.style}}var e={cssText:1,length:1,parentRule:1},f={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},g={removeProperty:1,setProperty:1};c.prototype={get cssText(){return this._surrogateStyle.cssText},set cssText(a){for(var b={},c=0;c<this._surrogateStyle.length;c++)b[this._surrogateStyle[c]]=!0;this._surrogateStyle.cssText=a,this._updateIndices();for(var c=0;c<this._surrogateStyle.length;c++)b[this._surrogateStyle[c]]=!0;for(var d in b)this._isAnimatedProperty[d]||this._style.setProperty(d,this._surrogateStyle.getPropertyValue(d))},get length(){return this._surrogateStyle.length},get parentRule(){return this._style.parentRule},_updateIndices:function(){for(;this._length<this._surrogateStyle.length;)Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,get:function(a){return function(){return this._surrogateStyle[a]}}(this._length)}),this._length++;for(;this._length>this._surrogateStyle.length;)this._length--,Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(a,b){this._style[a]=b,this._isAnimatedProperty[a]=!0},_clear:function(a){this._style[a]=this._surrogateStyle[a],delete this._isAnimatedProperty[a]}};for(var h in f)c.prototype[h]=function(a,b){return function(){var c=this._surrogateStyle[a].apply(this._surrogateStyle,arguments);return b&&(this._isAnimatedProperty[arguments[0]]||this._style[a].apply(this._style,arguments),this._updateIndices()),c}}(h,h in g);for(var i in document.documentElement.style)i in e||i in f||!function(a){b(c.prototype,a,{get:function(){return this._surrogateStyle[a]},set:function(b){this._surrogateStyle[a]=b,this._updateIndices(),this._isAnimatedProperty[a]||(this._style[a]=b)}})}(i);a.apply=function(b,c,e){d(b),b.style._set(a.propertyName(c),e)},a.clear=function(b,c){b._webAnimationsPatchedStyle&&b.style._clear(a.propertyName(c))}}(d,f),function(a){window.Element.prototype.animate=function(b,c){return a.timeline._play(a.KeyframeEffect(this,b,c))}}(d),function(a){function b(a,c,d){if("number"==typeof a&&"number"==typeof c)return a*(1-d)+c*d;if("boolean"==typeof a&&"boolean"==typeof c)return.5>d?a:c;if(a.length==c.length){for(var e=[],f=0;f<a.length;f++)e.push(b(a[f],c[f],d));return e}throw"Mismatched interpolation arguments "+a+":"+c}a.Interpolation=function(a,c,d){return function(e){return d(b(a,c,e))}}}(d,f),function(a){function b(a,b,c){return Math.max(Math.min(a,c),b)}function c(c,d,e){var f=a.dot(c,d);f=b(f,-1,1);var g=[];if(1===f)g=c;else for(var h=Math.acos(f),i=1*Math.sin(e*h)/Math.sqrt(1-f*f),j=0;4>j;j++)g.push(c[j]*(Math.cos(e*h)-f*i)+d[j]*i);return g}var d=function(){function a(a,b){for(var c=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],d=0;4>d;d++)for(var e=0;4>e;e++)for(var f=0;4>f;f++)c[d][e]+=b[d][f]*a[f][e];return c}function b(a){return 0==a[0][2]&&0==a[0][3]&&0==a[1][2]&&0==a[1][3]&&0==a[2][0]&&0==a[2][1]&&1==a[2][2]&&0==a[2][3]&&0==a[3][2]&&1==a[3][3]}function c(c,d,e,f,g){for(var h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],i=0;4>i;i++)h[i][3]=g[i];for(var i=0;3>i;i++)for(var j=0;3>j;j++)h[3][i]+=c[j]*h[j][i];var k=f[0],l=f[1],m=f[2],n=f[3],o=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];o[0][0]=1-2*(l*l+m*m),o[0][1]=2*(k*l-m*n),o[0][2]=2*(k*m+l*n),o[1][0]=2*(k*l+m*n),o[1][1]=1-2*(k*k+m*m),o[1][2]=2*(l*m-k*n),o[2][0]=2*(k*m-l*n),o[2][1]=2*(l*m+k*n),o[2][2]=1-2*(k*k+l*l),h=a(h,o);var p=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];e[2]&&(p[2][1]=e[2],h=a(h,p)),e[1]&&(p[2][1]=0,p[2][0]=e[0],h=a(h,p)),e[0]&&(p[2][0]=0,p[1][0]=e[0],h=a(h,p));for(var i=0;3>i;i++)for(var j=0;3>j;j++)h[i][j]*=d[i];return b(h)?[h[0][0],h[0][1],h[1][0],h[1][1],h[3][0],h[3][1]]:h[0].concat(h[1],h[2],h[3])}return c}();a.composeMatrix=d,a.quat=c}(d,f),function(a,b){a.sequenceNumber=0;var c=function(a,b,c){this.target=a,this.currentTime=b,this.timelineTime=c,this.type="finish",this.bubbles=!1,this.cancelable=!1,this.currentTarget=a,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};b.Animation=function(b){this._sequenceNumber=a.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!1,this.onfinish=null,this._finishHandlers=[],this._effect=b,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},b.Animation.prototype={_ensureAlive:function(){this._inEffect=this._effect._update(this.playbackRate<0&&0===this.currentTime?-1:this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,b.timeline._animations.push(this))},_tickCurrentTime:function(a,b){a!=this._currentTime&&(this._currentTime=a,this._isFinished&&!b&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(a){a=+a,isNaN(a)||(b.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-a/this._playbackRate),this._currentTimePending=!1,this._currentTime!=a&&(this._tickCurrentTime(a,!0),b.invalidateEffects()))},get startTime(){return this._startTime},set startTime(a){a=+a,isNaN(a)||this._paused||this._idle||(this._startTime=a,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),b.invalidateEffects())},get playbackRate(){return this._playbackRate},set playbackRate(a){if(a!=this._playbackRate){var b=this.currentTime;this._playbackRate=a,this._startTime=null,"paused"!=this.playState&&"idle"!=this.playState&&this.play(),null!=b&&(this.currentTime=b)}},get _isFinished(){return!this._idle&&(this._playbackRate>0&&this._currentTime>=this._totalDuration||this._playbackRate<0&&this._currentTime<=0)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._currentTime=this._playbackRate>0?0:this._totalDuration,this._startTime=null,b.invalidateEffects()),this._finishedFlag=!1,b.restart(),this._idle=!1,this._ensureAlive()},pause:function(){this._isFinished||this._paused||this._idle||(this._currentTimePending=!0),this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1)},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this.currentTime=0,this._startTime=null,this._effect._update(null),b.invalidateEffects(),b.restart())},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(a,b){"function"==typeof b&&"finish"==a&&this._finishHandlers.push(b)},removeEventListener:function(a,b){if("finish"==a){var c=this._finishHandlers.indexOf(b);c>=0&&this._finishHandlers.splice(c,1)}},_fireEvents:function(a){var b=this._isFinished;if((b||this._idle)&&!this._finishedFlag){var d=new c(this,this._currentTime,a),e=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){e.forEach(function(a){a.call(d.target,d)})},0)}this._finishedFlag=b},_tick:function(a){return this._idle||this._paused||(null==this._startTime?this.startTime=a-this._currentTime/this.playbackRate:this._isFinished||this._tickCurrentTime((a-this._startTime)*this.playbackRate)),this._currentTimePending=!1,this._fireEvents(a),!this._idle&&(this._inEffect||!this._finishedFlag)}}}(c,d,f),function(a,b){function c(a){var b=i;i=[],a<s.currentTime&&(a=s.currentTime),g(a),b.forEach(function(b){b[1](a)}),o&&g(a),f(),l=void 0}function d(a,b){return a._sequenceNumber-b._sequenceNumber}function e(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function f(){p.forEach(function(a){a()}),p.length=0}function g(a){n=!1;var c=b.timeline;c.currentTime=a,c._animations.sort(d),m=!1;var e=c._animations;c._animations=[];var f=[],g=[];e=e.filter(function(b){return b._inTimeline=b._tick(a),b._inEffect?g.push(b._effect):f.push(b._effect),b._isFinished||b._paused||b._idle||(m=!0),b._inTimeline}),p.push.apply(p,f),p.push.apply(p,g),c._animations.push.apply(c._animations,e),o=!1,m&&requestAnimationFrame(function(){})}var h=window.requestAnimationFrame,i=[],j=0;window.requestAnimationFrame=function(a){var b=j++;return 0==i.length&&h(c),i.push([b,a]),b},window.cancelAnimationFrame=function(a){i.forEach(function(b){b[0]==a&&(b[1]=function(){})})},e.prototype={_play:function(c){c._timing=a.normalizeTimingInput(c.timing);var d=new b.Animation(c);return d._idle=!1,d._timeline=this,this._animations.push(d),b.restart(),b.invalidateEffects(),d}};var k,l=void 0,k=function(){return void 0==l&&(l=performance.now()),l},m=!1,n=!1;b.restart=function(){return m||(m=!0,requestAnimationFrame(function(){}),n=!0),n};var o=!1;b.invalidateEffects=function(){o=!0};var p=[],q=1e3/60,r=window.getComputedStyle;Object.defineProperty(window,"getComputedStyle",{configurable:!0,enumerable:!0,value:function(){if(o){var a=k();a-s.currentTime>0&&(s.currentTime+=q*(Math.floor((a-s.currentTime)/q)+1)),g(s.currentTime)}return f(),r.apply(this,arguments)}});var s=new e;b.timeline=s}(c,d,f),function(a){function b(a,b){for(var c=0,d=0;d<a.length;d++)c+=a[d]*b[d];return c}function c(a,b){return[a[0]*b[0]+a[4]*b[1]+a[8]*b[2]+a[12]*b[3],a[1]*b[0]+a[5]*b[1]+a[9]*b[2]+a[13]*b[3],a[2]*b[0]+a[6]*b[1]+a[10]*b[2]+a[14]*b[3],a[3]*b[0]+a[7]*b[1]+a[11]*b[2]+a[15]*b[3],a[0]*b[4]+a[4]*b[5]+a[8]*b[6]+a[12]*b[7],a[1]*b[4]+a[5]*b[5]+a[9]*b[6]+a[13]*b[7],a[2]*b[4]+a[6]*b[5]+a[10]*b[6]+a[14]*b[7],a[3]*b[4]+a[7]*b[5]+a[11]*b[6]+a[15]*b[7],a[0]*b[8]+a[4]*b[9]+a[8]*b[10]+a[12]*b[11],a[1]*b[8]+a[5]*b[9]+a[9]*b[10]+a[13]*b[11],a[2]*b[8]+a[6]*b[9]+a[10]*b[10]+a[14]*b[11],a[3]*b[8]+a[7]*b[9]+a[11]*b[10]+a[15]*b[11],a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12]*b[15],a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13]*b[15],a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14]*b[15],a[3]*b[12]+a[7]*b[13]+a[11]*b[14]+a[15]*b[15]]}function d(a){switch(a.t){case"rotatex":var b=a.d[0].rad||0,c=a.d[0].deg||0,d=c*Math.PI/180+b;return[1,0,0,0,0,Math.cos(d),Math.sin(d),0,0,-Math.sin(d),Math.cos(d),0,0,0,0,1];case"rotatey":var b=a.d[0].rad||0,c=a.d[0].deg||0,d=c*Math.PI/180+b;return[Math.cos(d),0,-Math.sin(d),0,0,1,0,0,Math.sin(d),0,Math.cos(d),0,0,0,0,1];case"rotate":case"rotatez":var b=a.d[0].rad||0,c=a.d[0].deg||0,d=c*Math.PI/180+b;return[Math.cos(d),Math.sin(d),0,0,-Math.sin(d),Math.cos(d),0,0,0,0,1,0,0,0,0,1];case"rotate3d":var e=a.d[0],f=a.d[1],g=a.d[2],b=a.d[3].rad||0,c=a.d[3].deg||0,d=c*Math.PI/180+b,h=e*e+f*f+g*g;if(0===h)e=1,f=0,g=0;else if(1!==h){var i=Math.sqrt(h);e/=i,f/=i,g/=i}var j=Math.sin(d/2),k=j*Math.cos(d/2),l=j*j;return[1-2*(f*f+g*g)*l,2*(e*f*l+g*k),2*(e*g*l-f*k),0,2*(e*f*l-g*k),1-2*(e*e+g*g)*l,2*(f*g*l+e*k),0,2*(e*g*l+f*k),2*(f*g*l-e*k),1-2*(e*e+f*f)*l,0,0,0,0,1];case"scale":return[a.d[0],0,0,0,0,a.d[1],0,0,0,0,1,0,0,0,0,1];case"scalex":return[a.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,a.d[0],0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,a.d[0],0,0,0,0,1];case"scale3d":return[a.d[0],0,0,0,0,a.d[1],0,0,0,0,a.d[2],0,0,0,0,1];case"skew":var m=a.d[0].deg||0,n=a.d[0].rad||0,o=a.d[1].deg||0,p=a.d[1].rad||0,q=m*Math.PI/180+n,r=o*Math.PI/180+p;return[1,Math.tan(r),0,0,Math.tan(q),1,0,0,0,0,1,0,0,0,0,1];case"skewx":var b=a.d[0].rad||0,c=a.d[0].deg||0,d=c*Math.PI/180+b;return[1,0,0,0,Math.tan(d),1,0,0,0,0,1,0,0,0,0,1];case"skewy":var b=a.d[0].rad||0,c=a.d[0].deg||0,d=c*Math.PI/180+b;return[1,Math.tan(d),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":var e=a.d[0].px||0,f=a.d[1].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,e,f,0,1];case"translatex":var e=a.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translatey":var f=a.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,0,f,0,1];case"translatez":var g=a.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,g,1];case"translate3d":var e=a.d[0].px||0,f=a.d[1].px||0,g=a.d[2].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,e,f,g,1];case"perspective":var s=a.d[0].px?-1/a.d[0].px:0;return[1,0,0,0,0,1,0,0,0,0,1,s,0,0,0,1];case"matrix":return[a.d[0],a.d[1],0,0,a.d[2],a.d[3],0,0,0,0,1,0,a.d[4],a.d[5],0,1];case"matrix3d":return a.d}}function e(a){return 0===a.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:a.map(d).reduce(c)}function f(a){return[g(e(a))]}var g=function(){function a(a){return a[0][0]*a[1][1]*a[2][2]+a[1][0]*a[2][1]*a[0][2]+a[2][0]*a[0][1]*a[1][2]-a[0][2]*a[1][1]*a[2][0]-a[1][2]*a[2][1]*a[0][0]-a[2][2]*a[0][1]*a[1][0]}function c(b){for(var c=1/a(b),d=b[0][0],e=b[0][1],f=b[0][2],g=b[1][0],h=b[1][1],i=b[1][2],j=b[2][0],k=b[2][1],l=b[2][2],m=[[(h*l-i*k)*c,(f*k-e*l)*c,(e*i-f*h)*c,0],[(i*j-g*l)*c,(d*l-f*j)*c,(f*g-d*i)*c,0],[(g*k-h*j)*c,(j*e-d*k)*c,(d*h-e*g)*c,0]],n=[],o=0;3>o;o++){for(var p=0,q=0;3>q;q++)p+=b[3][q]*m[q][o];n.push(p)}return n.push(1),m.push(n),m}function d(a){return[[a[0][0],a[1][0],a[2][0],a[3][0]],[a[0][1],a[1][1],a[2][1],a[3][1]],[a[0][2],a[1][2],a[2][2],a[3][2]],[a[0][3],a[1][3],a[2][3],a[3][3]]]}function e(a,b){for(var c=[],d=0;4>d;d++){for(var e=0,f=0;4>f;f++)e+=a[f]*b[f][d];c.push(e)}return c}function f(a){var b=g(a);return[a[0]/b,a[1]/b,a[2]/b]}function g(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])}function h(a,b,c,d){return[c*a[0]+d*b[0],c*a[1]+d*b[1],c*a[2]+d*b[2]]}function i(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function j(j){var k=[j.slice(0,4),j.slice(4,8),j.slice(8,12),j.slice(12,16)];if(1!==k[3][3])return null;for(var l=[],m=0;4>m;m++)l.push(k[m].slice());for(var m=0;3>m;m++)l[m][3]=0;if(0===a(l))return!1;var n,o=[];if(k[0][3]||k[1][3]||k[2][3]){o.push(k[0][3]),o.push(k[1][3]),o.push(k[2][3]),o.push(k[3][3]);var p=c(l),q=d(p);n=e(o,q)}else n=[0,0,0,1];var r=k[3].slice(0,3),s=[];s.push(k[0].slice(0,3));var t=[];t.push(g(s[0])),s[0]=f(s[0]);var u=[];s.push(k[1].slice(0,3)),u.push(b(s[0],s[1])),s[1]=h(s[1],s[0],1,-u[0]),t.push(g(s[1])),s[1]=f(s[1]),u[0]/=t[1],s.push(k[2].slice(0,3)),u.push(b(s[0],s[2])),s[2]=h(s[2],s[0],1,-u[1]),u.push(b(s[1],s[2])),s[2]=h(s[2],s[1],1,-u[2]),t.push(g(s[2])),s[2]=f(s[2]),u[1]/=t[2],u[2]/=t[2];var v=i(s[1],s[2]);if(b(s[0],v)<0)for(var m=0;3>m;m++)t[m]*=-1,s[m][0]*=-1,s[m][1]*=-1,s[m][2]*=-1;var w,x,y=s[0][0]+s[1][1]+s[2][2]+1;return y>1e-4?(w=.5/Math.sqrt(y),x=[(s[2][1]-s[1][2])*w,(s[0][2]-s[2][0])*w,(s[1][0]-s[0][1])*w,.25/w]):s[0][0]>s[1][1]&&s[0][0]>s[2][2]?(w=2*Math.sqrt(1+s[0][0]-s[1][1]-s[2][2]),x=[.25*w,(s[0][1]+s[1][0])/w,(s[0][2]+s[2][0])/w,(s[2][1]-s[1][2])/w]):s[1][1]>s[2][2]?(w=2*Math.sqrt(1+s[1][1]-s[0][0]-s[2][2]),x=[(s[0][1]+s[1][0])/w,.25*w,(s[1][2]+s[2][1])/w,(s[0][2]-s[2][0])/w]):(w=2*Math.sqrt(1+s[2][2]-s[0][0]-s[1][1]),x=[(s[0][2]+s[2][0])/w,(s[1][2]+s[2][1])/w,.25*w,(s[1][0]-s[0][1])/w]),[r,t,u,x,n]}return j}();a.dot=b,a.makeMatrixDecomposition=f}(d,f),function(a){function b(a,b){var c=a.exec(b);return c?(c=a.ignoreCase?c[0].toLowerCase():c[0],[c,b.substr(c.length)]):void 0}function c(a,b){b=b.replace(/^\s*/,"");var c=a(b);return c?[c[0],c[1].replace(/^\s*/,"")]:void 0}function d(a,d,e){a=c.bind(null,a);for(var f=[];;){var g=a(e);if(!g)return[f,e];if(f.push(g[0]),e=g[1],g=b(d,e),!g||""==g[1])return[f,e];e=g[1]}}function e(a,b){for(var c=0,d=0;d<b.length&&(!/\s|,/.test(b[d])||0!=c);d++)if("("==b[d])c++;else if(")"==b[d]&&(c--,0==c&&d++,0>=c))break;var e=a(b.substr(0,d));return void 0==e?void 0:[e,b.substr(d)]}function f(a,b){for(var c=a,d=b;c&&d;)c>d?c%=d:d%=c;return c=a*b/(c+d)}function g(a){return function(b){var c=a(b);return c&&(c[0]=void 0),c}}function h(a,b){return function(c){var d=a(c);return d?d:[b,c]}}function i(b,c){for(var d=[],e=0;e<b.length;e++){var f=a.consumeTrimmed(b[e],c);if(!f||""==f[0])return;void 0!==f[0]&&d.push(f[0]),c=f[1]}return""==c?d:void 0}function j(a,b,c,d,e){for(var g=[],h=[],i=[],j=f(d.length,e.length),k=0;j>k;k++){var l=b(d[k%d.length],e[k%e.length]);if(!l)return;g.push(l[0]),h.push(l[1]),i.push(l[2])}return[g,h,function(b){var d=b.map(function(a,b){return i[b](a)}).join(c);return a?a(d):d}]}function k(a,b,c){for(var d=[],e=[],f=[],g=0,h=0;h<c.length;h++)if("function"==typeof c[h]){var i=c[h](a[g],b[g++]);d.push(i[0]),e.push(i[1]),f.push(i[2])}else!function(a){d.push(!1),e.push(!1),f.push(function(){return c[a]})}(h);return[d,e,function(a){for(var b="",c=0;c<a.length;c++)b+=f[c](a[c]);return b}]}a.consumeToken=b,a.consumeTrimmed=c,a.consumeRepeated=d,a.consumeParenthesised=e,a.ignore=g,a.optional=h,a.consumeList=i,a.mergeNestedRepeated=j.bind(null,null),a.mergeWrappedNestedRepeated=j,a.mergeList=k}(d),function(a){function b(b){function c(b){var c=a.consumeToken(/^inset/i,b);if(c)return d.inset=!0,c;var c=a.consumeLengthOrPercent(b);if(c)return d.lengths.push(c[0]),c;var c=a.consumeColor(b);return c?(d.color=c[0],c):void 0}var d={inset:!1,lengths:[],color:null},e=a.consumeRepeated(c,/^/,b);return e&&e[0].length?[d,e[1]]:void 0}function c(c){var d=a.consumeRepeated(b,/^,/,c);return d&&""==d[1]?d[0]:void 0}function d(b,c){for(;b.lengths.length<Math.max(b.lengths.length,c.lengths.length);)b.lengths.push({px:0});for(;c.lengths.length<Math.max(b.lengths.length,c.lengths.length);)c.lengths.push({px:0});if(b.inset==c.inset&&!!b.color==!!c.color){for(var d,e=[],f=[[],0],g=[[],0],h=0;h<b.lengths.length;h++){var i=a.mergeDimensions(b.lengths[h],c.lengths[h],2==h);f[0].push(i[0]),g[0].push(i[1]),e.push(i[2])}if(b.color&&c.color){var j=a.mergeColors(b.color,c.color);f[1]=j[0],g[1]=j[1],d=j[2]}return[f,g,function(a){for(var c=b.inset?"inset ":" ",f=0;f<e.length;f++)c+=e[f](a[0][f])+" ";return d&&(c+=d(a[1])),c}]}}function e(b,c,d,e){function f(a){return{inset:a,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var g=[],h=[],i=0;i<d.length||i<e.length;i++){var j=d[i]||f(e[i].inset),k=e[i]||f(d[i].inset);g.push(j),h.push(k)}return a.mergeNestedRepeated(b,c,g,h)}var f=e.bind(null,d,", ");a.addPropertiesHandler(c,f,["box-shadow","text-shadow"])}(d),function(a){function b(a){return a.toFixed(3).replace(".000","")}function c(a,b,c){return Math.min(b,Math.max(a,c))}function d(a){return/^\s*[-+]?(\d*\.)?\d+\s*$/.test(a)?Number(a):void 0}function e(a,c){return[a,c,b]}function f(a,b){return 0!=a?h(0,1/0)(a,b):void 0}function g(a,b){return[a,b,function(a){return Math.round(c(1,1/0,a))}]}function h(a,d){return function(e,f){return[e,f,function(e){return b(c(a,d,e))}]}}function i(a,b){return[a,b,Math.round]}a.clamp=c,a.addPropertiesHandler(d,h(0,1/0),["border-image-width","line-height"]),a.addPropertiesHandler(d,h(0,1),["opacity","shape-image-threshold"]),a.addPropertiesHandler(d,f,["flex-grow","flex-shrink"]),a.addPropertiesHandler(d,g,["orphans","widows"]),a.addPropertiesHandler(d,i,["z-index"]),a.parseNumber=d,a.mergeNumbers=e,a.numberToString=b}(d,f),function(a){function b(a,b){return"visible"==a||"visible"==b?[0,1,function(c){return 0>=c?a:c>=1?b:"visible"}]:void 0}a.addPropertiesHandler(String,b,["visibility"])}(d),function(a){function b(a){a=a.trim(),e.fillStyle="#000",e.fillStyle=a;var b=e.fillStyle;if(e.fillStyle="#fff",e.fillStyle=a,b==e.fillStyle){e.fillRect(0,0,1,1);var c=e.getImageData(0,0,1,1).data;e.clearRect(0,0,1,1);var d=c[3]/255;return[c[0]*d,c[1]*d,c[2]*d,d]}}function c(b,c){return[b,c,function(b){function c(a){return Math.max(0,Math.min(255,a))}if(b[3])for(var d=0;3>d;d++)b[d]=Math.round(c(b[d]/b[3]));return b[3]=a.numberToString(a.clamp(0,1,b[3])),"rgba("+b.join(",")+")"}]}var d=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");d.width=d.height=1;var e=d.getContext("2d");a.addPropertiesHandler(b,c,["background-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","outline-color","text-decoration-color"]),a.consumeColor=a.consumeParenthesised.bind(null,b),a.mergeColors=c}(d,f),function(a,b){function c(a,b){if(b=b.trim().toLowerCase(),"0"==b&&"px".search(a)>=0)return{px:0};if(/^[^(]*$|^calc/.test(b)){b=b.replace(/calc\(/g,"(");var c={};b=b.replace(a,function(a){return c[a]=null,"U"+a});for(var d="U("+a.source+")",e=b.replace(/[-+]?(\d*\.)?\d+/g,"N").replace(new RegExp("N"+d,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),f=[/N\*(D)/g,/(N|D)[*/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],g=0;g<f.length;)f[g].test(e)?(e=e.replace(f[g],"$1"),g=0):g++;if("D"==e){for(var h in c){var i=eval(b.replace(new RegExp("U"+h,"g"),"").replace(new RegExp(d,"g"),"*0"));if(!isFinite(i))return;c[h]=i}return c}}}function d(a,b){return e(a,b,!0)}function e(b,c,d){var e,f=[];for(e in b)f.push(e);for(e in c)f.indexOf(e)<0&&f.push(e);return b=f.map(function(a){return b[a]||0}),c=f.map(function(a){return c[a]||0}),[b,c,function(b){var c=b.map(function(c,e){return 1==b.length&&d&&(c=Math.max(c,0)),a.numberToString(c)+f[e]}).join(" + ");return b.length>1?"calc("+c+")":c}]}var f="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",g=c.bind(null,new RegExp(f,"g")),h=c.bind(null,new RegExp(f+"|%","g")),i=c.bind(null,/deg|rad|grad|turn/g);a.parseLength=g,a.parseLengthOrPercent=h,a.consumeLengthOrPercent=a.consumeParenthesised.bind(null,h),a.parseAngle=i,a.mergeDimensions=e;var j=a.consumeParenthesised.bind(null,g),k=a.consumeRepeated.bind(void 0,j,/^/),l=a.consumeRepeated.bind(void 0,k,/^,/);a.consumeSizePairList=l;var m=function(a){var b=l(a);return b&&""==b[1]?b[0]:void 0},n=a.mergeNestedRepeated.bind(void 0,d," "),o=a.mergeNestedRepeated.bind(void 0,n,",");a.mergeNonNegativeSizePair=n,a.addPropertiesHandler(m,o,["background-size"]),a.addPropertiesHandler(h,d,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),a.addPropertiesHandler(h,e,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","text-indent","top","vertical-align","word-spacing"])}(d,f),function(a){function b(b){return a.consumeLengthOrPercent(b)||a.consumeToken(/^auto/,b)}function c(c){var d=a.consumeList([a.ignore(a.consumeToken.bind(null,/^rect/)),a.ignore(a.consumeToken.bind(null,/^\(/)),a.consumeRepeated.bind(null,b,/^,/),a.ignore(a.consumeToken.bind(null,/^\)/))],c);return d&&4==d[0].length?d[0]:void 0}function d(b,c){return"auto"==b||"auto"==c?[!0,!1,function(d){var e=d?b:c;if("auto"==e)return"auto";var f=a.mergeDimensions(e,e);return f[2](f[0])}]:a.mergeDimensions(b,c)}function e(a){return"rect("+a+")"}var f=a.mergeWrappedNestedRepeated.bind(null,e,d,", ");a.parseBox=c,a.mergeBoxes=f,a.addPropertiesHandler(c,f,["clip"])}(d,f),function(a){function b(a){return function(b){var c=0;return a.map(function(a){return a===j?b[c++]:a})}}function c(a){return a}function d(b){if(b=b.toLowerCase().trim(),"none"==b)return[];for(var c,d=/\s*(\w+)\(([^)]*)\)/g,e=[],f=0;c=d.exec(b);){if(c.index!=f)return;f=c.index+c[0].length;var g=c[1],h=m[g];if(!h)return;var i=c[2].split(","),j=h[0];if(j.length<i.length)return;for(var n=[],o=0;o<j.length;o++){var p,q=i[o],r=j[o];if(p=q?{A:function(b){return"0"==b.trim()?l:a.parseAngle(b)},N:a.parseNumber,T:a.parseLengthOrPercent,L:a.parseLength}[r.toUpperCase()](q):{a:l,n:n[0],t:k}[r],void 0===p)return;n.push(p)}if(e.push({t:g,d:n}),d.lastIndex==b.length)return e}}function e(a){return a.toFixed(6).replace(".000000","")}function f(b,c){if(b.decompositionPair!==c){b.decompositionPair=c;var d=a.makeMatrixDecomposition(b)}if(c.decompositionPair!==b){c.decompositionPair=b;var f=a.makeMatrixDecomposition(c)}return null==d[0]||null==f[0]?[[!1],[!0],function(a){return a?c[0].d:b[0].d}]:(d[0].push(0),f[0].push(1),[d,f,function(b){var c=a.quat(d[0][3],f[0][3],b[5]),g=a.composeMatrix(b[0],b[1],b[2],c,b[4]),h=g.map(e).join(",");return h}])}function g(a){return a.replace(/[xy]/,"")}function h(a){return a.replace(/(x|y|z|3d)?$/,"3d")}function i(b,c){var d=a.makeMatrixDecomposition&&!0,e=!1;if(!b.length||!c.length){b.length||(e=!0,b=c,c=[]);for(var i=0;i<b.length;i++){var j=b[i].t,k=b[i].d,l="scale"==j.substr(0,5)?1:0;c.push({t:j,d:k.map(function(a){if("number"==typeof a)return l;var b={};for(var c in a)b[c]=l;return b})})}}var n=function(a,b){return"perspective"==a&&"perspective"==b||("matrix"==a||"matrix3d"==a)&&("matrix"==b||"matrix3d"==b)},o=[],p=[],q=[];if(b.length!=c.length){if(!d)return;var r=f(b,c);o=[r[0]],p=[r[1]],q=[["matrix",[r[2]]]]}else for(var i=0;i<b.length;i++){var j,s=b[i].t,t=c[i].t,u=b[i].d,v=c[i].d,w=m[s],x=m[t];if(n(s,t)){if(!d)return;var r=f([b[i]],[c[i]]);o.push(r[0]),p.push(r[1]),q.push(["matrix",[r[2]]])}else{if(s==t)j=s;else if(w[2]&&x[2]&&g(s)==g(t))j=g(s),u=w[2](u),v=x[2](v);else{if(!w[1]||!x[1]||h(s)!=h(t)){if(!d)return;var r=f(b,c);o=[r[0]],p=[r[1]],q=[["matrix",[r[2]]]];break}j=h(s),u=w[1](u),v=x[1](v)}for(var y=[],z=[],A=[],B=0;B<u.length;B++){var C="number"==typeof u[B]?a.mergeNumbers:a.mergeDimensions,r=C(u[B],v[B]);y[B]=r[0],z[B]=r[1],A.push(r[2])}o.push(y),p.push(z),q.push([j,A])}}if(e){var D=o;o=p,p=D}return[o,p,function(a){return a.map(function(a,b){var c=a.map(function(a,c){return q[b][1][c](a)}).join(",");return"matrix"==q[b][0]&&16==c.split(",").length&&(q[b][0]="matrix3d"),q[b][0]+"("+c+")"}).join(" ")}]}var j=null,k={px:0},l={deg:0},m={matrix:["NNNNNN",[j,j,0,0,j,j,0,0,0,0,1,0,j,j,0,1],c],matrix3d:["NNNNNNNNNNNNNNNN",c],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",b([j,j,1]),c],scalex:["N",b([j,1,1]),b([j,1])],scaley:["N",b([1,j,1]),b([1,j])],scalez:["N",b([1,1,j])],scale3d:["NNN",c],skew:["Aa",null,c],skewx:["A",null,b([j,l])],skewy:["A",null,b([l,j])],translate:["Tt",b([j,j,k]),c],translatex:["T",b([j,k,k]),b([j,k])],translatey:["T",b([k,j,k]),b([k,j])],translatez:["L",b([k,k,j])],translate3d:["TTL",c]};a.addPropertiesHandler(d,i,["transform"])}(d,f),function(a){function b(a){var b=Number(a);return isNaN(b)||100>b||b>900||b%100!==0?void 0:b}function c(b){return b=100*Math.round(b/100),b=a.clamp(100,900,b),400===b?"normal":700===b?"bold":String(b)}function d(a,b){return[a,b,c]}a.addPropertiesHandler(b,d,["font-weight"])}(d),function(a){function b(a){var b={};for(var c in a)b[c]=-a[c];return b}function c(b){return a.consumeToken(/^(left|center|right|top|bottom)\b/i,b)||a.consumeLengthOrPercent(b)}function d(b,d){var e=a.consumeRepeated(c,/^/,d);if(e&&""==e[1]){var f=e[0];if(f[0]=f[0]||"center",f[1]=f[1]||"center",3==b&&(f[2]=f[2]||{px:0}),f.length==b){if(/top|bottom/.test(f[0])||/left|right/.test(f[1])){var h=f[0];f[0]=f[1],f[1]=h}if(/left|right|center|Object/.test(f[0])&&/top|bottom|center|Object/.test(f[1]))return f.map(function(a){return"object"==typeof a?a:g[a]})}}}function e(d){var e=a.consumeRepeated(c,/^/,d);if(e){for(var f=e[0],h=[{"%":50},{"%":50}],i=0,j=!1,k=0;k<f.length;k++){var l=f[k];"string"==typeof l?(j=/bottom|right/.test(l),i={left:0,right:0,center:i,top:1,bottom:1}[l],h[i]=g[l],"center"==l&&i++):(j&&(l=b(l),l["%"]=(l["%"]||0)+100),h[i]=l,i++,j=!1)}return[h,e[1]]}}function f(b){var c=a.consumeRepeated(e,/^,/,b);return c&&""==c[1]?c[0]:void 0}var g={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},h=a.mergeNestedRepeated.bind(null,a.mergeDimensions," ");a.addPropertiesHandler(d.bind(null,3),h,["transform-origin"]),a.addPropertiesHandler(d.bind(null,2),h,["perspective-origin"]),a.consumePosition=e,a.mergeOffsetList=h;var i=a.mergeNestedRepeated.bind(null,h,", ");a.addPropertiesHandler(f,i,["background-position","object-position"])}(d),function(a){function b(b){var c=a.consumeToken(/^circle/,b);if(c&&c[0])return["circle"].concat(a.consumeList([a.ignore(a.consumeToken.bind(void 0,/^\(/)),d,a.ignore(a.consumeToken.bind(void 0,/^at/)),a.consumePosition,a.ignore(a.consumeToken.bind(void 0,/^\)/))],c[1]));var f=a.consumeToken(/^ellipse/,b);if(f&&f[0])return["ellipse"].concat(a.consumeList([a.ignore(a.consumeToken.bind(void 0,/^\(/)),e,a.ignore(a.consumeToken.bind(void 0,/^at/)),a.consumePosition,a.ignore(a.consumeToken.bind(void 0,/^\)/))],f[1]));var g=a.consumeToken(/^polygon/,b);return g&&g[0]?["polygon"].concat(a.consumeList([a.ignore(a.consumeToken.bind(void 0,/^\(/)),a.optional(a.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),a.consumeSizePairList,a.ignore(a.consumeToken.bind(void 0,/^\)/))],g[1])):void 0}function c(b,c){return b[0]===c[0]?"circle"==b[0]?a.mergeList(b.slice(1),c.slice(1),["circle(",a.mergeDimensions," at ",a.mergeOffsetList,")"]):"ellipse"==b[0]?a.mergeList(b.slice(1),c.slice(1),["ellipse(",a.mergeNonNegativeSizePair," at ",a.mergeOffsetList,")"]):"polygon"==b[0]&&b[1]==c[1]?a.mergeList(b.slice(2),c.slice(2),["polygon(",b[1],g,")"]):void 0:void 0;
}var d=a.consumeParenthesised.bind(null,a.parseLengthOrPercent),e=a.consumeRepeated.bind(void 0,d,/^/),f=a.mergeNestedRepeated.bind(void 0,a.mergeDimensions," "),g=a.mergeNestedRepeated.bind(void 0,f,",");a.addPropertiesHandler(b,c,["shape-outside"])}(d),function(a){function b(a,b){b.concat([a]).forEach(function(b){b in document.documentElement.style&&(c[a]=b)})}var c={};b("transform",["webkitTransform","msTransform"]),b("transformOrigin",["webkitTransformOrigin"]),b("perspective",["webkitPerspective"]),b("perspectiveOrigin",["webkitPerspectiveOrigin"]),a.propertyName=function(a){return c[a]||a}}(d,f)}()}({},function(){return this}()),Automatune.util={},Automatune.util.extend=function(a,b){"use strict";b.prototype=Object.create(a.prototype),b.prototype.constructor=b},Automatune.util.setCSSRotation=function(a,b){"use strict";var c=-90*b,d="rotate("+c+"deg)";a.style["-webkit-transform"]=d,a.style.transform=d},Automatune.util.rotateRight=function(a){"use strict";return 3===a?0:a+1},Automatune.util.rotateLeft=function(a){"use strict";return 0===a?3:a-1},Automatune.util.getOpposite=function(a){"use strict";return a==Automatune.O_RIGHT?Automatune.O_LEFT:a==Automatune.O_UP?Automatune.O_DOWN:a==Automatune.O_LEFT?Automatune.O_RIGHT:a==Automatune.O_DOWN?Automatune.O_UP:void assert(!1)},Automatune.util.getOrientationDelta=function(a){"use strict";return a==Automatune.O_RIGHT?{x:1,y:0}:a==Automatune.O_UP?{x:0,y:-1}:a==Automatune.O_LEFT?{x:-1,y:0}:a==Automatune.O_DOWN?{x:0,y:1}:void assert(!1)},Automatune.prototype.getClassName=function(){"use strict";return"Automatune"},Automatune.prototype.update=function(){"use strict";for(var a=0;a<this.updateTargets.length;a++){var b=this.updateTargets[a];b.update()}},Automatune.prototype.setTickMs=function(a){"use strict";this.tickMs=a;for(var b=0;b<this.updateTargets.length;b++)this.updateTargets[b].updateTickMs();this.playing&&(window.clearInterval(this.updateInterval),this.updateInterval=window.setInterval(this.update.bind(this),this.tickMs))},Automatune.prototype.getTickMs=function(){"use strict";return this.tickMs},Automatune.prototype.resetPlaybackButtons=function(){"use strict";this.playbackButtons.playButton.classList.remove("active"),this.playbackButtons.pauseButton.classList.remove("active"),this.playbackButtons.resetButton.classList.remove("active")},Automatune.prototype.play=function(){"use strict";this.playing||(this.playing=!0,this.resetPlaybackButtons(),this.playbackButtons.playButton.classList.add("active"),this.updateInterval=window.setInterval(this.update.bind(this),this.tickMs),this.update())},Automatune.prototype.pause=function(){"use strict";this.playing=!1,this.resetPlaybackButtons(),this.playbackButtons.pauseButton.classList.add("active"),window.clearInterval(this.updateInterval)},Automatune.prototype.reset=function(){"use strict"},Automatune.prototype.createVisitor=function(a,b,c){"use strict";var d=new Automatune.Visitor(this,a,b,c);this.updateTargets.push(d)},Automatune.prototype.destroyVisitor=function(a,b){"use strict";for(var c=0;c<this.updateTargets.length;c++){var d=this.updateTargets[c];d.pos.x===a&&d.pos.y===b&&(this.updateTargets.splice(c,1),c--,d.destroy())}},Automatune.prototype.newGrid=function(a){"use strict";for(var b=0;b<this.updateTargets.length;b++)this.updateTargets[b].destroy();this.updateTargets=[],this.grid.destroy(),this.grid=new Automatune.Grid(this,a)},Automatune.prototype.getSaveState=function(){"use strict";function a(){for(var a=[],c=0;c<b.updateTargets.length;c++)a.push(b.updateTargets[c].getSaveState());return a}var b=this;return{info:"Automatune Save File - www.automatune.com",save:{version:"alpha1",data:{date:Date.now(),tickMs:b.tickMs,updateTargets:a(),grid:b.grid.getSaveState()}}}},Automatune.prototype.applySaveState=function(a){"use strict";try{a=a.save.data,this.setTickMs(a.tickMs),this.newGrid(a.grid.size);for(var b=0;b<a.updateTargets.length;b++){var c=a.updateTargets[b];this.createVisitor(c.pos.x,c.pos.y,c.orientation)}this.grid.applySaveState(a.grid)}catch(d){throw console.error("Loading of save state failed. The save is either corrupt or incompatible with this version of Automatune."),console.error("The exception produced was: "),d}},Automatune.prototype.downloadSaveState=function(){"use strict";download(JSON.stringify(this.getSaveState(),null,4),"tune.atune","text/plain")},Automatune.prototype.getSharingURL=function(){"use strict";var a=JSON.stringify(this.getSaveState());LZMA.compress(a,1,function(a){for(var b in a)a[b]+=128;var c=String.fromCharCode.apply(null,a),d=encodeURIComponent(btoa(c)),e=CryptoJS.MD5(d).toString(CryptoJS.enc.Hex),f=window.location.href.split("?")[0]+"?state="+d+"&checksum="+e,g="<div><p>Here's the URL of your song in its current state!<br />("+(-1!=navigator.userAgent.indexOf("Mac OS X")?"cmd":"ctrl")+"-c to copy it)</p><input type='text' style='width: 100%;' onfocus='this.select();' onmouseup='return false;' value='"+f+"'></div>";$(g).dialog()})},Automatune.prototype.loadFromUrlComponent=function(a){"use strict";for(var b=this,c=atob(decodeURIComponent(a)),d=[],e=0;e<c.length;e++)d.push(c.charCodeAt(e)-128);LZMA.decompress(d,function(a){b.applySaveState(JSON.parse(a))})},$(document).ready(function(){"use strict";var a=document.getElementById("automatune"),b=document.getElementsByClassName("playback-controls")[0],c=document.getElementById("menubar"),d=new Automatune(a,b,c,7),e=!1;if(-1!==window.location.href.indexOf("?state="))try{var f=getUrlParameter("state"),g=getUrlParameter("checksum"),h=CryptoJS.MD5(f).toString(CryptoJS.enc.Hex);if(h!==g)throw"URL checksum mismatch";d.loadFromUrlComponent(getUrlParameter("state")),history&&history.pushState({},"",window.location.href.split("?")[0]),e=!0}catch(i){$("<p>Sorry, that URL seems to be invalid, so we couldn't load that tune :(</p>").dialog(),console.error("Loading of save state from URL failed. The URL is either corrupt or contains a save that is incompatible with this version of Automatune."),console.error("The exception produced was: "),e=!1}e||d.createVisitor(3,4,Automatune.O_RIGHT),Automatune.browserSupported&&d.play()}),Automatune.browserSupported=(bowser.chrome||bowser.firefox||bowser.msie&&bowser.version>=11)&&!bowser.mobile&&!bowser.tablet,Automatune.Component=function(a,b){"use strict";assert(2===arguments.length),this.parentCell,this.orientation,this.domElement,this.orientation=b,this.parentCell=a,this.domElement=document.createElement("div"),this.domElement.className="gridCellProperty",this.parentCell.domElement.insertBefore(this.domElement,this.parentCell.domElement.firstChild),this.setOrientation(this.orientation),window.setTimeout(function(){this.domElement.classList.add("active")}.bind(this),160)},Automatune.Component.prototype.getClassName=function(){"use strict";return"Automatune.Component"},Automatune.Component.prototype.appendTo=function(a){},Automatune.Component.prototype.setOrientation=function(a){"use strict";this.orientation=a,Automatune.util.setCSSRotation(this.domElement,this.orientation)},Automatune.Component.prototype.rotateRight=function(){"use strict";var a=this.orientation;this.orientation=Automatune.util.rotateRight(this.orientation),Automatune.util.setCSSRotation(this.domElement,this.orientation);var b=-90*a,c="rotate("+b+"deg)",d=this.orientation==Automatune.O_RIGHT?-360:-90*this.orientation,e="rotate("+d+"deg)";this.domElement.animate([{transform:c},{transform:e}],{duration:200,easing:"ease-out"})},Automatune.Component.prototype.rotateLeft=function(){"use strict";this.orientation=Automatune.util.rotateLeft(this.orientation),Automatune.util.setCSSRotation(this.domElement,this.orientation)},Automatune.Component.prototype.onVisit=function(a){"use strict";throw"onVisit called on a Component that does not implement onVisit."},Automatune.Component.prototype.destroy=function(){"use strict";this.domElement.parentNode.removeChild(this.domElement)},Automatune.Component_Arrow=function(a,b){"use strict";assert(2===arguments.length),Automatune.Component.call(this,a,b),this.img=document.createElement("img"),this.img.src="images/arrow.svg",this.domElement.appendChild(this.img)},Automatune.util.extend(Automatune.Component,Automatune.Component_Arrow),Automatune.Component_Arrow.prototype.getClassName=function(){"use strict";return"Automatune.Component_Arrow"},Automatune.Component_Arrow.prototype.destroy=function(){"use strict";this.domElement.removeChild(this.img),Automatune.Component.prototype.destroy.call(this)},Automatune.Component_Arrow.prototype.onVisit=function(a){"use strict";a.orientation=this.orientation},Automatune.Component_Arrow.prototype.getSaveState=function(){"use strict";return{instanceOf:this.getClassName(),orientation:this.orientation}},Automatune.Component_Arrow.constructFromSaveState=function(a,b){"use strict";return new Automatune.Component_Arrow(a,b.orientation)},Automatune.O_RIGHT=0,Automatune.O_UP=1,Automatune.O_LEFT=2,Automatune.O_DOWN=3,Automatune.TICK_SLOW=1e3,Automatune.TICK_NORMAL=500,Automatune.TICK_FAST=250,Automatune.TICK_FASTEST=125,Automatune.Grid=function(a,b){"use strict";assert(2===arguments.length),this.parentGame,this.domElement,this.gridCells,this.gridSize,this.cellCSSWidth,this.cellCSSSpacing,this.parentGame=a,this.domElement=document.createElement("div"),this.domElement.className="gridContainer",this.parentGame.domElement.appendChild(this.domElement),this.gridSize=b,this.cellCSSSpacing=10/this.gridSize,this.cellCSSWidth=(100-this.cellCSSSpacing)/this.gridSize-this.cellCSSSpacing,this.gridCells=new Array(b);for(var c=0;b>c;c++){for(var d=new Array(b),e=0;b>e;e++)d[e]=new Automatune.GridCell(this,c,e);this.gridCells[c]=d}},Automatune.Grid.prototype.getClassName=function(){"use strict";return"Automatune.Grid"},Automatune.Grid.prototype.getGridSize=function(){"use strict";return this.gridSize},Automatune.Grid.prototype.isInBounds=function(a,b){"use strict";return a>=0&&a<this.gridSize&&b>=0&&b<this.gridSize},Automatune.Grid.prototype.getCell=function(a,b){"use strict";return this.gridCells[a][b]},Automatune.Grid.prototype.destroy=function(){"use strict";this.domElement.parentNode.removeChild(this.domElement)},Automatune.Grid.prototype.getSaveState=function(){"use strict";return{size:this.gridSize,gridCells:function(){for(var a=[],b=0;b<this.gridSize;b++)for(var c=0;c<this.gridSize;c++)a.push(this.gridCells[b][c].getSaveState());return a}.call(this)}},Automatune.Grid.prototype.applySaveState=function(a){"use strict";for(var b=this.getGridSize(),c=0;c<a.gridCells.length;c++)this.getCell(Math.floor(c/b),c%b).applySaveState(a.gridCells[c])},Automatune.GridCell=function(a,b,c){"use strict";assert(3===arguments.length),this.parentGrid,this.domElement,this.modifiersElement,this.pos,this.modifiers,this.component,this.parentGrid=a,this.pos={x:b,y:c},this.modifiers=[],this.component=null;var d=this.parentGrid.getGridSize(),e=10/d,f=(100-e)/d-e;this.domElement=document.createElement("div"),this.domElement.setAttribute("data-pos-x",b),this.domElement.setAttribute("data-pos-y",c),this.domElement.className="gridCellDiv";var g=(f+e)*b+e,h=(f+e)*c+e;this.domElement.style.left=g+"%",this.domElement.style.top=h+"%",this.domElement.style.width=f+"%",this.domElement.style.height=f+"%",this.domElement.style.padding=e+"%",this.modifiersElement=document.createElement("div"),this.modifiersElement.className="modifiersContainer",this.domElement.appendChild(this.modifiersElement),this.parentGrid.domElement.appendChild(this.domElement),this.domElement.onclick=this.onClick.bind(this)},Automatune.GridCell.prototype.getClassName=function(){"use strict";return"Automatune.GridCell"},Automatune.GridCell.prototype.addModifier=function(a){"use strict";this.modifiers.push(a)},Automatune.GridCell.prototype.removeModifier=function(a){"use strict";for(var b=0;b<this.modifiers.length;b++){var c=this.modifiers[b];if(c.getClassName()===a)return void this.modifiers.splice(b,1)}},Automatune.GridCell.prototype.removeModifiers=function(a){"use strict";for(var b=0;b<this.modifiers.length;b++){var c=this.modifiers[b];c.getClassName()===a&&(this.modifiers.splice(b,1),b--,c.destroy())}},Automatune.GridCell.prototype.hasModifier=function(a){"use strict";for(var b=0;b<this.modifiers.length;b++){var c=this.modifiers[b];if(c.getClassName()===a)return!0}return!1},Automatune.GridCell.prototype.getModifier=function(a){},Automatune.GridCell.prototype.hasComponent=function(a){"use strict";return null!==this.component},Automatune.GridCell.prototype.getComponent=function(){"use strict";return this.component},Automatune.GridCell.prototype.setComponent=function(a){"use strict";this.destroyComponent(),this.component=a,this.domElement.classList.add("active")},Automatune.GridCell.prototype.destroyComponent=function(){"use strict";this.component&&this.component.destroy(),this.component=null,this.domElement.classList.remove("active")},Automatune.GridCell.prototype.getCSSPosition=function(){"use strict";var a=this.parentGrid,b=(a.cellCSSWidth+a.cellCSSSpacing)*this.pos.x+a.cellCSSSpacing,c=(a.cellCSSWidth+a.cellCSSSpacing)*this.pos.y+a.cellCSSSpacing;return{x:b,y:c}},Automatune.GridCell.prototype.onVisit=function(a){"use strict";this.component&&this.component.onVisit(a);for(var b=0;b<this.modifiers.length;b++)this.modifiers[b].onVisit(a)},Automatune.GridCell.prototype.onClick=function(){"use strict";this.hasComponent()?this.getComponent().rotateRight():this.setComponent(new Automatune.Component_Arrow(this,Automatune.O_RIGHT))},Automatune.GridCell.prototype.getSaveState=function(){"use strict";return{component:this.component?this.component.getSaveState():null,modifiers:function(){for(var a=[],b=0;b<this.modifiers.length;b++)a.push(this.modifiers[b].getSaveState());return a}.call(this)}},Automatune.GridCell.prototype.applySaveState=function(a){"use strict";if(a.component){var b=a.component.instanceOf.split(".")[1];if("Component"!==b.split("_")[0]||!Automatune[b])throw"Unexpected Component type";var c=Automatune[b].constructFromSaveState(this,a.component);this.setComponent(c)}for(var d=0;d<a.modifiers.length;d++){var e=a.modifiers[d].instanceOf.split(".")[1];if("Modifier"!==e.split("_")[0]||!Automatune[e])throw"Unexpected Modifier type";var f=Automatune[e].constructFromSaveState(this,a.modifiers[d]);this.addModifier(f)}},Automatune.Menu=function(a,b){"use strict";function c(){function a(a){var b="Octave "+a;return a===e?b+" (Lowest)":3===a?b+" (Mid)":a===f?b+" (Highest)":b}function b(a){for(var b=[],d=c.length-1;d>=0;d--){var e,f=c[d];e=d===c.length-1?f+(a+1):f+a,b.push({title:e,cmd:"pitch."+e})}return b}for(var c=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C"],d={title:"Add Note",children:[]},e=1,f=7,g=f;g>=e;g--)d.children.push({title:a(g),children:b(g)});return d}assert(2===arguments.length),this.parentGame,this.parentGame=a;var d=$(a.domElement),e=$(b),f=this;d.contextmenu({delegate:".gridCellDiv",menu:[c(),{title:"Delete&nbsp;All&nbsp;Notes",cmd:"pitch.delete"},{title:"---"},{title:"Delete Component",cmd:"delete_component"},{title:"---"},{title:"Create New Visitor",cmd:"new_visitor"},{title:"Delete Visitor",cmd:"delete_visitor"}],select:function(a,b){for(var c=b.target[0];!c.classList.contains("gridCellDiv");)c=c.parentNode,assert(c!=document.body);var d=parseInt(c.getAttribute("data-pos-x"),10),e=parseInt(c.getAttribute("data-pos-y"),10),g=f.parentGame.grid.getCell(d,e),h=b.cmd.split(".");switch(h[0]){case"pitch":"delete"===h[1]?g.removeModifiers("Automatune.Modifier_Note"):g.addModifier(new Automatune.Modifier_Note(g,h[1]));break;case"new_visitor":f.parentGame.createVisitor(d,e,Automatune.O_RIGHT);break;case"delete_component":f.parentGame.grid.getCell(d,e).destroyComponent();break;case"delete_visitor":f.parentGame.destroyVisitor(d,e);break;default:alert("Menu item not yet implemented")}}}),e.find("> .menu-automatune").contextmenu({delegate:"span",menu:[{title:"About Automatune",cmd:"about"}],select:function(a,b){switch(b.cmd){case"about":$("#automatune-about").dialog("open");break;default:alert("Menu item not implemented")}},autoTrigger:!1}),$("#automatune-about").dialog({autoOpen:!1}),e.find("> .menu-file").contextmenu({delegate:"span",menu:[{title:"New",children:[{title:"Small&nbsp;(5x5)",cmd:"new.small"},{title:"Medium&nbsp;(7x7)",cmd:"new.medium"},{title:"Large&nbsp;(9x9)",cmd:"new.large"},{title:"X&#8209;Large&nbsp;(11x11)",cmd:"new.xlarge"},{title:"XX&#8209;Large&nbsp;(15x15)",cmd:"new.xxlarge"}]},{title:"---"},{title:"Share via URL...",cmd:"share"},{title:"---"},{title:"Open from File",cmd:"open"},{title:"Save to File",cmd:"save"},{title:"---"},{title:"Open Example (Not Yet Implemented)",disabled:!0}],select:function(a,b){var c=b.cmd.split(".");switch(c[0]){case"new":var d;switch(c[1]){case"small":d=5;break;case"medium":d=7;break;case"large":d=9;break;case"xlarge":d=11;break;case"xxlarge":d=15;break;default:return void alert("Menu item not implemented")}var e=$(['<div title="Create new Automatune?">',"<p>Are you sure you want to create a new tune? Any unsaved progress will be lost.</p>","</div>"].join(""));$(f.parentGame.domElement).append(e),e.dialog({resizable:!1,width:500,modal:!0,buttons:{Cancel:function(){$(this).dialog("close")},"Create New Tune":function(){f.parentGame.newGrid(d),f.parentGame.createVisitor(Math.floor(d/2),Math.floor(d/2),Automatune.O_RIGHT),$(this).dialog("close")}},open:function(){$(this).parent().find("button:nth-child(2)").focus()}});break;case"open":var g=$(['<div title="Open an Automatune">',"<p>Choose a file to open.</p>",'<input class="openInput" type="file" />','<p class="youGottaChoose" style="display: none; color: red;">',"Please select a file before continuing.","</p>","</div>"].join(""));$(f.parentGame.domElement).append(g),g.dialog({resizable:!1,width:500,modal:!0,buttons:{Cancel:function(){$(this).dialog("close")},Open:function(){function a(a){var b=JSON.parse(a.target.result);f.parentGame.applySaveState(b)}var b=g.find(".openInput")[0],c=new FileReader;if(b.files.length){var d=b.files[0];c.readAsText(d),$(c).on("load",a),$(this).dialog("close")}else g.find(".youGottaChoose").css("display","block")}},open:function(){$(this).parent().find("button:nth-child(2)").focus()}});break;case"save":f.parentGame.downloadSaveState();break;case"share":f.parentGame.getSharingURL();break;default:alert("Menu item not implemented")}},autoTrigger:!1}),e.find("> .menu-edit").contextmenu({delegate:"span",menu:[{title:"Select All (Not Yet Implemented)",cmd:"selectall",disabled:!0},{title:"Copy (Not Yet Implemented)",cmd:"copy",disabled:!0},{title:"Paste (Not Yet Implemented)",cmd:"paste",disabled:!0}],select:function(a,b){console.log("select "+b.cmd+" on ",b.target)},autoTrigger:!1}),e.find("> .menu-sound").contextmenu({delegate:"span",menu:[{title:"Volume",children:[{title:"10&nbsp;(Highest)",cmd:"volume.10"},{title:"9",cmd:"volume.9"},{title:"8",cmd:"volume.8"},{title:"7",cmd:"volume.7"},{title:"6",cmd:"volume.6"},{title:"5",cmd:"volume.5"},{title:"4",cmd:"volume.4"},{title:"3",cmd:"volume.3"},{title:"2",cmd:"volume.2"},{title:"1&nbsp;(Lowest)",cmd:"volume.1"}]},{title:"Tempo",children:[{title:"Slow",cmd:"tempo.slow"},{title:"Normal",cmd:"tempo.normal"},{title:"Fast",cmd:"tempo.fast"},{title:"Fastest",cmd:"tempo.fastest"}]},{title:"Enable Metronome (Not Yet Implemented)",cmd:"metronome",disabled:!0}],select:function(a,b){console.log("select "+b.cmd+" on ",b.target);var c=b.cmd.split(".");switch(c[0]){case"volume":var d=.1*parseInt(c[1],10),e=d*d;Howler.volume(e),ohSnap("Volume "+c[1],"black");break;case"tempo":switch(c[1]){case"slow":f.parentGame.setTickMs(Automatune.TICK_SLOW),ohSnap("Tempo: Slow","black");break;case"normal":f.parentGame.setTickMs(Automatune.TICK_NORMAL),ohSnap("Tempo: Normal","black");break;case"fast":f.parentGame.setTickMs(Automatune.TICK_FAST),ohSnap("Tempo: Fast","black");break;case"fastest":f.parentGame.setTickMs(Automatune.TICK_FASTEST),ohSnap("Tempo: Fastest","black")}break;default:alert("Menu item not yet implemented")}},autoTrigger:!1}),e.find("> .menu-help").contextmenu({delegate:"span",menu:[{title:"View Tutorial Video",cmd:"tutorialvideo"}],select:function(a,b){"tutorialvideo"===b.cmd&&window.open("https://www.youtube.com/watch?v=rU6m4N4Okv8","_blank")},autoTrigger:!1}),Howler.volume(.25),e.find("> li").click(function(){$(this).contextmenu("open",$(this).find("span"))}),Automatune.browserSupported||$("#automatune-unsupported").dialog()},Automatune.Modifier=function(a){"use strict";assert(1===arguments.length),this.parentCell,this.parentCell=a},Automatune.Modifier.prototype.getClassName=function(){"use strict";return"Automatune.Modifier"},Automatune.Modifier.prototype.appendTo=function(a){},Automatune.Modifier.prototype.onVisit=function(a){"use strict";throw"onVisit called on a Modifier that does not implement onVisit."},Automatune.Modifier.prototype.destroy=function(){},Automatune.Modifier_Note=function(a,b){"use strict";assert(2===arguments.length),Automatune.Modifier.call(this,a),this.domElement,this.noteName,this.howl,this.noteName=b;var c="snd/piano/Piano.mf.";this.howl=new Howl({urls:[c+b+".mp3",c+b+".ogg"],volume:.7}),this.domElement=document.createElement("div"),this.domElement.className="tileicon note",this.domElement.title=this.noteName,this.parentCell.modifiersElement.appendChild(this.domElement)},Automatune.util.extend(Automatune.Modifier,Automatune.Modifier_Note),Automatune.Modifier_Note.prototype.getClassName=function(){"use strict";return"Automatune.Modifier_Note"},Automatune.Modifier_Note.prototype.onVisit=function(a){"use strict";this.howl.play();var b=document.createElement("div");b.classList.add("floatnote"),this.parentCell.domElement.appendChild(b),function(a){var c=b.animate([{transform:"scale(0.15)",opacity:1},{transform:"scale(1.75)",opacity:0}],{duration:1e3});c.onfinish=function(b){a.parentNode.removeChild(a)}}(b)},Automatune.Modifier_Note.prototype.destroy=function(){"use strict";this.domElement.parentNode.removeChild(this.domElement)},Automatune.Modifier_Note.prototype.getSaveState=function(){"use strict";return{instanceOf:this.getClassName(),noteName:this.noteName}},Automatune.Modifier_Note.constructFromSaveState=function(a,b){"use strict";return new Automatune.Modifier_Note(a,b.noteName)},Automatune.Visitor=function(a,b,c,d){"use strict";assert(4===arguments.length),this.parentGame,this.domElement,this.pos,this.orientation,this.parentGame=a,this.pos={x:b,y:c},this.orientation=d,this.domElement=document.createElement("div"),this.domElement.className="gridVisitor";var e=this.parentGame.grid;this.domElement.style.width=e.cellCSSWidth+"%",this.domElement.style.height=e.cellCSSWidth+"%",this.updateCSSPosition(),this.parentGame.domElement.appendChild(this.domElement),this.updateTickMs()},Automatune.Visitor.prototype.getClassName=function(){"use strict";return"Automatune.Visitor"},Automatune.Visitor.prototype.update=function(){"use strict";this.parentGame.grid.getCell(this.pos.x,this.pos.y).onVisit(this);var a=this.parentGame.grid,b=Automatune.util.getOrientationDelta(this.orientation);a.isInBounds(this.pos.x+b.x,this.pos.y+b.y)||(this.orientation=Automatune.util.getOpposite(this.orientation),b=Automatune.util.getOrientationDelta(this.orientation)),this.pos={x:this.pos.x+b.x,y:this.pos.y+b.y},this.updateCSSPosition()},Automatune.Visitor.prototype.updateCSSPosition=function(){"use strict";var a=this.parentGame.grid.cellCSSWidth,b=this.parentGame.grid.getCell(this.pos.x,this.pos.y).getCSSPosition(),c=100/a;b={x:b.x*c,y:b.y*c};var d="translate("+b.x+"%, "+b.y+"%)";this.domElement.style["-webkit-transform"]=d,this.domElement.style.transform=d},Automatune.Visitor.prototype.updateTickMs=function(){"use strict";var a=this.parentGame.getTickMs();this.domElement.style["webkit-transition"]="-webkit-transform "+a+"ms linear",this.domElement.style.transition="transform "+a+"ms linear"},Automatune.Visitor.prototype.destroy=function(){"use strict";this.domElement.parentNode.removeChild(this.domElement)},Automatune.Visitor.prototype.getSaveState=function(){"use strict";return{pos:this.pos,orientation:this.orientation}};